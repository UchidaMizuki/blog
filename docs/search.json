[
  {
    "objectID": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html",
    "href": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html",
    "title": "e-Stat APIã«ã¤ã„ã¦Tokyo.Rã§ç™ºè¡¨ã—ã¾ã—ãŸ",
    "section": "",
    "text": "ç¬¬108å›Rå‹‰å¼·ä¼š@æ±äº¬ï¼ˆ#TokyoRï¼‰ã®LTã«ã¦e-Stat APIã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸ1ï¼\nLTã¨ã¯ï¼ŒLightning Talksï¼ˆãƒ©ã‚¤ãƒˆãƒ‹ãƒ³ã‚°ãƒˆãƒ¼ã‚¯ï¼‰ã®ç•¥ã§ï¼ŒçŸ­æ™‚é–“ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ã“ã¨ã§ã™ï¼Tokyo.Rã§ã¯ï¼Œ1äººã‚ãŸã‚Šã®ç™ºè¡¨æ™‚é–“ã¯5åˆ†ã§ã—ãŸï¼\nå½“æ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è³‡æ–™ã¯ã“ã¡ã‚‰ã§ã™ï¼"
  },
  {
    "objectID": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#ç™ºè¡¨æ¦‚è¦",
    "href": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#ç™ºè¡¨æ¦‚è¦",
    "title": "e-Stat APIã«ã¤ã„ã¦Tokyo.Rã§ç™ºè¡¨ã—ã¾ã—ãŸ",
    "section": "",
    "text": "ç¬¬108å›Rå‹‰å¼·ä¼š@æ±äº¬ï¼ˆ#TokyoRï¼‰ã®LTã«ã¦e-Stat APIã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚ã‚‹jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸ1ï¼\nLTã¨ã¯ï¼ŒLightning Talksï¼ˆãƒ©ã‚¤ãƒˆãƒ‹ãƒ³ã‚°ãƒˆãƒ¼ã‚¯ï¼‰ã®ç•¥ã§ï¼ŒçŸ­æ™‚é–“ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ã“ã¨ã§ã™ï¼Tokyo.Rã§ã¯ï¼Œ1äººã‚ãŸã‚Šã®ç™ºè¡¨æ™‚é–“ã¯5åˆ†ã§ã—ãŸï¼\nå½“æ—¥ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è³‡æ–™ã¯ã“ã¡ã‚‰ã§ã™ï¼"
  },
  {
    "objectID": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆã«ã¤ã„ã¦",
    "href": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆã«ã¤ã„ã¦",
    "title": "e-Stat APIã«ã¤ã„ã¦Tokyo.Rã§ç™ºè¡¨ã—ã¾ã—ãŸ",
    "section": "ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆã«ã¤ã„ã¦",
    "text": "ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆã«ã¤ã„ã¦\nã“ã‚Œã¾ã§Quartoã‚’GitHubã®READMEã‚„ã‚µã‚¤ãƒˆä½œæˆãªã©ã«æ´»ç”¨ã—ã¦ãã¾ã—ãŸãŒï¼Œä»Šå›ï¼Œã¯ã˜ã‚ã¦ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆã«æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ãŸï¼\nä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã—ãªãŒã‚‰ï¼Œè‡ªä½œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®jpstatã‚’ç´¹ä»‹ã™ã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’è©¦ã—ã«ä½œã£ã¦ã¿ãŸã¨ã“ã‚ï¼Œæ¡ˆå¤–ï¼Œç°¡å˜ã«ã‚¹ãƒ©ã‚¤ãƒ‰ãŒä½œæˆã§ãï¼ŒæŠ˜è§’ãªã®ã§Rå‹‰å¼·ä¼šã§ç™ºè¡¨ã—ã¦ã¿ã¾ã—ãŸï¼\n\nhttps://quarto.org/docs/presentations/\nhttps://quarto.org/docs/presentations/revealjs/\n\nã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ï¼Quartoã¯ï¼Œã“ã¡ã‚‰ã®qmdï¼ˆQuarto Markdownï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ã§è¨˜è¿°ã•ã‚Œã¦ã¾ã™ï¼\nä»¥ä¸‹ã§ã¯ï¼ŒQuartoã¨reveal.jsã«ã‚ˆã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰ä½œæˆã§ä»Šå›ï¼Œç‰¹ã«ä¾¿åˆ©ã¨æ„Ÿã˜ãŸæ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ã¾ã™ï¼\n\nä¾¿åˆ©æ©Ÿèƒ½â‘ ï¼šã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°æ©Ÿèƒ½\nä»¥ä¸‹ã®ã‚ˆã†ã«code-line-numbers ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã‚³ãƒ¼ãƒ‰ã®ä¸€éƒ¨ã®è¡Œã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\nã“ã“ã§ã¯ï¼Œcode-line-numbers: \"2-3\" ã§2ãƒ»3è¡Œç›®ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¦ã„ã¾ã™ï¼ã•ã‚‰ã«ï¼Œcode-line-numbers: \"1|2-3\" ã®ã‚ˆã†ã«ï¼Œ| ã§åŒºåˆ‡ã‚‹ã“ã¨ã§ãƒã‚¤ãƒ©ã‚¤ãƒˆå…ˆã‚’æ¨ç§»ã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã‚ˆã†ã§ã™ï¼\nãƒã‚¤ãƒ©ã‚¤ãƒˆæ©Ÿèƒ½ã¯ï¼Œä¸€éƒ¨ã®ã‚³ãƒ¼ãƒ‰ã®ã¿ã«æ³¨ç›®ã‚’é›†ã‚ãŸã„å ´åˆã«ï¼Œéå¸¸ã«ä¾¿åˆ©ã§ã™ï¼\n```{r}\n#| echo: true\n#| code-line-numbers: \"2-3\"\n\nestat(statsDataId = \"0003343671\") |&gt; \n  activate(cat01) |&gt; \n  filter(str_detect(name, \"ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆ\"))\n```\n\n\nä¾¿åˆ©æ©Ÿèƒ½â‘¡ï¼šè‡ªå‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³æ©Ÿèƒ½\n## ã‹ã‚‰å§‹ã¾ã‚‹å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®ã‚¿ã‚¤ãƒˆãƒ«ã®å³ãªã©ã«{auto-animate=\"true\"} ã‚’ã¤ã‘ã‚‹ã“ã¨ã§æ¬¡ã®ãƒšãƒ¼ã‚¸ã®è¨˜è¿°ã¨å…±é€šã™ã‚‹è¨˜è¿°ã‚’è‡ªå‹•ã§æ¢ã—å‡ºã—ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŒ–ã—ã¦ãã‚Œã¾ã™ï¼\nå‰å¾Œã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§è¨˜è¿°ã®ç¹°ã‚Šè¿”ã—ãŒã‚ã‚‹å ´åˆã«ã¯ï¼Œè‡ªå‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§æ–‡è„ˆã®ã¤ãªãŒã‚ŠãŒã‚ã‹ã‚Šã‚„ã™ããªã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ„Ÿã˜ã¾ã—ãŸï¼\nã¾ãŸï¼Œ::: {.fragment .fade-in} ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ï¼Œã‚¹ãƒ©ã‚¤ãƒ‰ã®é€”ä¸­ã§è¨˜è¿°ã‚’è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼ã“ã¡ã‚‰ã‚‚ç‰¹å®šã®è¨˜è¿°ã«æ³¨ç›®ã—ã¦ã»ã—ã„å ´åˆã«æœ‰ç”¨ã‹ã¨æ€ã„ã¾ã™ï¼\n\n\nä¾¿åˆ©æ©Ÿèƒ½â‘¢ï¼šã‚¿ã‚¤ãƒˆãƒ«ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼è¨­å®šæ©Ÿèƒ½\nã‚¿ã‚¤ãƒˆãƒ«ã‚¹ãƒ©ã‚¤ãƒ‰ã‚„å…¨ã‚¹ãƒ©ã‚¤ãƒ‰å…±é€šã®ãƒ•ãƒƒã‚¿ãƒ¼ã¯ï¼Œqmdãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šéƒ¨ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¼‰ã™ã‚‹ã“ã¨ã§è‡ªå‹•ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã•ã‚Œã¾ã™ï¼\nã“ã“ã§ã¯ï¼Œã‚¿ã‚¤ãƒˆãƒ«ä»¥å¤–ã«ã‚‚ï¼Œã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ãƒ»è‘—è€…ãƒ»æ—¥ä»˜ã‚‚è¨­å®šã—ã¦ã„ã¾ã™ãŒï¼Œã“ã‚Œã‚‰ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºãªã©ã‚’åˆ¥é€”æŒ‡å®šã—ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã—ãŸï¼\nã¾ãŸï¼Œä»Šå›ã¯reveal.jsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ¼ãƒã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒï¼Œã“ã¡ã‚‰ã®ã‚ˆã†ã«ãƒ†ãƒ¼ãƒã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼\n---\ntitle: \"e-StatğŸ¤R\"\nsubtitle: \"Tokyo.R #108\"\nauthor: UchidaMizuki\ndate: \"2023-09-02\"\nfooter: &lt;https://github.com/UchidaMizuki/jpstat&gt;\nformat: \n  revealjs\n---"
  },
  {
    "objectID": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#ã¾ã¨ã‚",
    "href": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#ã¾ã¨ã‚",
    "title": "e-Stat APIã«ã¤ã„ã¦Tokyo.Rã§ç™ºè¡¨ã—ã¾ã—ãŸ",
    "section": "ã¾ã¨ã‚",
    "text": "ã¾ã¨ã‚\nQuartoã‚’ä½¿ã†ã“ã¨ã§LTç™ºè¡¨ã«ã¡ã‚‡ã†ã©ã‚ˆã„ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è³‡æ–™ã‚’ç°¡å˜ã«ã¤ãã‚Œã‚‹ã“ã¨ãŒå®Ÿæ„Ÿã§ãã¾ã—ãŸï¼\nã¡ãªã¿ã«ï¼Œã“ã‚Œã¾ã§ã‚‚Quartoã§ä½œæˆã—ãŸãƒšãƒ¼ã‚¸ã®GitHub Pagesã¸ã®å…¬é–‹ã‚’è¡Œã£ã¦ãã¾ã—ãŸãŒï¼Œä»Šå›ã®reveal.jsã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚‚Publish Commandã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ç°¡å˜ã«å…¬é–‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸ2ï¼\nã•ã‚‰ã«ä½™è«‡ã§ã™ãŒï¼ŒGitHub Pagesãªã©ã§æŒ™ã’ãŸè³‡æ–™ã¯ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚Œã°Quartoã®è¨˜äº‹ã«åŸ‹ã‚è¾¼ã‚€ã“ã¨ã‚‚ã§ãã¾ã™ï¼\n```{=html}\n&lt;iframe src=\"https://uchidamizuki.github.io/slide-estat-with-r/\" width = \"800\" height = \"500\"&gt;&lt;/iframe&gt;\n```"
  },
  {
    "objectID": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#footnotes",
    "href": "posts/2023/09/presentation-on-e-stat-api-at-tokyor.html#footnotes",
    "title": "e-Stat APIã«ã¤ã„ã¦Tokyo.Rã§ç™ºè¡¨ã—ã¾ã—ãŸ",
    "section": "è„šæ³¨",
    "text": "è„šæ³¨\n\n\nç¬¬108å›Tokyo.Rã®ã‚¤ãƒ™ãƒ³ãƒˆç”³è¾¼è€…ã¯ã¡ã‚‡ã†ã©108äººã ã£ãŸã‚ˆã†ã§ã™ï¼â†©ï¸\nGitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•æ›´æ–°ã¯ã†ã¾ãã„ã‹ãªã£ãŸãŸã‚ï¼Œä»Šå›ã¯ï¼ŒRStudioã®Terminalã‹ã‚‰æ‰‹å‹•ã§quarto publish gh-pages ã‚’å®Ÿè¡Œã—ã¾ã—ãŸï¼â†©ï¸"
  },
  {
    "objectID": "posts/2023/04/quantify-vote-disparity-between-generations.html",
    "href": "posts/2023/04/quantify-vote-disparity-between-generations.html",
    "title": "ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "section": "",
    "text": "ã¡ã‚‡ã†ã©é¸æŒ™ã‚·ãƒ¼ã‚ºãƒ³ã§ã™ã®ã§1ï¼Œã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ï¼Œã—ã°ã—ã°å•é¡Œã«ãªã‚‹ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ï¼\nã€Œ1ç¥¨ã®æ ¼å·®ã€ã¯ï¼Œé€šå¸¸ï¼Œè­°å“¡1äººã‚ãŸã‚Šã®æœ‰æ¨©è€…æ•°ãŒåœ°åŸŸï¼ˆé¸æŒ™åŒºï¼‰ã«ã‚ˆã£ã¦ç•°ãªã‚‹ï¼ˆâ‰’è­°å“¡1äººã‚’å½“é¸ã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªç¥¨æ•°ãŒåœ°åŸŸã«ã‚ˆã£ã¦ç•°ãªã‚‹ï¼‰ã“ã¨ã‚’æŒ‡ã—ã¾ã™ï¼ãŸã¨ãˆã°ï¼Œ2022å¹´ã®å‚è­°é™¢é¸æŒ™ã§ã¯ï¼Œã€Œ1ç¥¨ã®æ ¼å·®ã€ãŒæœ€å¤§ã§3.03å€ã§ã‚ã£ãŸã¨ã•ã‚Œã¦ã„ã¾ã™2ï¼\nç¾åœ¨ï¼Œæ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã¨åœ°æ–¹ã¯ä»¥ä¸‹ã®è¡¨ã®ã‚ˆã†ãªé–¢ä¿‚ã«ã‚ã‚‹ã¨ã•ã‚Œï¼Œã€Œ1ç¥¨ã®æ ¼å·®ã€ãŒã€Œåœ°æ–¹ã§æ–°å¹¹ç·šãŒæ•´å‚™ã•ã‚Œã‚‹ä¸€æ–¹ã§æ±äº¬ã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥ãŒè§£æ¶ˆã•ã‚Œãªã„ã€ã¨ã„ã£ãŸçµŒæ¸ˆåŠ¹ç‡æ€§ã®ä½ä¸‹ãªã©ã‚’å¼•ãèµ·ã“ã™ã“ã¨ãŒå•é¡Œè¦–ã•ã‚Œã¦ã„ã¾ã™3ï¼\n\n\n\n\n\n\n\n\nåœ°åŸŸ\nãŠé‡‘ã®æµã‚Œï¼ˆåœ°æ–¹äº¤ä»˜ç¨ãªã©ï¼‰\næ”¿æ²»çš„å¹³ç­‰ï¼ˆã€Œ1ç¥¨ã®æ ¼å·®ã€ï¼‰\n\n\n\n\néƒ½å¸‚éƒ¨\nåœ°æ–¹ã«ãŠé‡‘ã‚’ã€Œæ”¯æ‰•ã†ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒè»½ã\néƒ½å¸‚éƒ¨ã€Œå†·é‡ã€\n\n\nåœ°æ–¹\néƒ½å¸‚éƒ¨ã‹ã‚‰ãŠé‡‘ã‚’ã€Œå—ã‘å–ã‚‹ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒé‡ã\nåœ°æ–¹ã€Œå„ªé‡ã€\n\n\n\nä¸€æ–¹ã§ï¼Œä»Šå¾Œï¼Œæ±äº¬ä¸€æ¥µé›†ä¸­ãªã©ã«ã‚ˆã‚Šåœ°æ–¹ã®ç¤¾ä¼šèª²é¡ŒãŒä¸€å±¤æ·±åˆ»ã«ãªã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã¾ã™ï¼ãã®ãŸã‚ï¼Œã€Œ1ç¥¨ã®ä¾¡å€¤ã€ã‚’å®Œå…¨ã«ç­‰ã—ãã™ã‚Œã°ï¼Œã‚€ã—ã‚åœ°æ–¹ã®ã€Œå†·é‡ã€ã«ã¤ãªãŒã‚‹ã¨ã„ã£ãŸæ‡¸å¿µã‚‚ã‚ã‚Šã¾ã™ï¼\nã“ã®ã‚ˆã†ã«ï¼Œã€Œ1ç¥¨ã®æ ¼å·®ã€ã®æ˜¯æ­£ã¯ï¼Œæ±ºã—ã¦ç°¡å˜ãªé“ã®ã‚Šã¨ã¯ã„ãˆã¾ã›ã‚“ãŒï¼Œå¼•ãç¶šãæ˜¯æ­£ã«å‘ã‘ãŸå–ã‚Šçµ„ã¿ã‚’é€²ã‚ã¦ã„ãå¿…è¦ãŒã‚ã‚‹ã¨ã„ãˆã‚‹ã§ã—ã‚‡ã†ï¼\n\n\nã“ã“ã¾ã§ç´¹ä»‹ã—ãŸåœ°åŸŸé–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã«åŠ ãˆã¦ï¼Œä¸–ä»£é–“ã«ã‚‚ã€Œ1ç¥¨ã®æ ¼å·®ã€ãŒå­˜åœ¨ã™ã‚‹ã¨ã„ã‚ã‚Œã¦ã„ã¾ã™4ï¼ã“ã‚Œã¯ï¼Œå°‘å­é«˜é½¢åŒ–ã«ã‚ˆã‚Šï¼Œè‹¥å¹´å±¤ã®æœ‰æ¨©è€…æ•°ã«å¯¾ã—ã¦é«˜é½¢è€…å±¤ã®æœ‰æ¨©è€…æ•°ãŒå¤šããªã‚‹ã“ã¨ã«ã‚ˆã‚Šå¼•ãèµ·ã“ã•ã‚Œã‚‹ã‚‚ã®ã§ã™5ï¼\nã•ãã»ã©ç¤ºã—ãŸéƒ½å¸‚ãƒ»åœ°æ–¹éƒ¨ã®é–¢ä¿‚ã¨åŒæ§˜ã«ï¼Œè‹¥å¹´å±¤ã¨é«˜é½¢è€…å±¤ã¯ï¼Œä»¥ä¸‹ã®è¡¨ã®ã‚ˆã†ãªé–¢ä¿‚ã«ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ï¼åœ°æ–¹ã«ãŠã‘ã‚‹äººå£æ¸›å°‘ãƒ»äººæ‰‹ä¸è¶³ãŒæ·±åˆ»ã¨ãªã£ãŸæœ€è¿‘ã«ãªã£ã¦ã‚ˆã†ã‚„ãï¼Œå›½ã¯ï¼Œå°‘å­åŒ–å¯¾ç­–ã‚’å›½ã®æœ€é‡è¦èª²é¡Œã«ä½ç½®ã¥ã‘ã¾ã—ãŸãŒï¼Œã“ã‚Œã¾ã§ï¼Œã“ã†ã—ãŸè‹¥å¹´å±¤å‘ã‘ã®æ”¿ç­–ãŒååˆ†ã«è¡Œã‚ã‚Œãªã‹ã£ãŸ6ã®ã¯ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã®å½±éŸ¿ã«ã‚ˆã‚‹ã‚‚ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼\n\n\n\n\n\n\n\n\nä¸–ä»£\nãŠé‡‘ã®æµã‚Œï¼ˆç¤¾ä¼šä¿éšœè²»ãªã©ï¼‰\næ”¿æ²»çš„å¹³ç­‰ï¼ˆã€Œ1ç¥¨ã®æ ¼å·®ã€ï¼‰\n\n\n\n\nè‹¥å¹´å±¤\né«˜é½¢è€…å±¤ã«ãŠé‡‘ã‚’ã€Œæ”¯æ‰•ã†ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒè»½ã\nè‹¥å¹´å±¤ã€Œå†·é‡ã€\n\n\né«˜é½¢è€…å±¤\nè‹¥å¹´å±¤ã‹ã‚‰ãŠé‡‘ã‚’ã€Œå—ã‘å–ã‚‹ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒé‡ã\né«˜é½¢è€…å±¤ã€Œå„ªé‡ã€"
  },
  {
    "objectID": "posts/2023/04/quantify-vote-disparity-between-generations.html#ç¥¨ã®æ ¼å·®ã¨ã¯",
    "href": "posts/2023/04/quantify-vote-disparity-between-generations.html#ç¥¨ã®æ ¼å·®ã¨ã¯",
    "title": "ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "section": "",
    "text": "ã¡ã‚‡ã†ã©é¸æŒ™ã‚·ãƒ¼ã‚ºãƒ³ã§ã™ã®ã§1ï¼Œã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ï¼Œã—ã°ã—ã°å•é¡Œã«ãªã‚‹ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ï¼\nã€Œ1ç¥¨ã®æ ¼å·®ã€ã¯ï¼Œé€šå¸¸ï¼Œè­°å“¡1äººã‚ãŸã‚Šã®æœ‰æ¨©è€…æ•°ãŒåœ°åŸŸï¼ˆé¸æŒ™åŒºï¼‰ã«ã‚ˆã£ã¦ç•°ãªã‚‹ï¼ˆâ‰’è­°å“¡1äººã‚’å½“é¸ã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªç¥¨æ•°ãŒåœ°åŸŸã«ã‚ˆã£ã¦ç•°ãªã‚‹ï¼‰ã“ã¨ã‚’æŒ‡ã—ã¾ã™ï¼ãŸã¨ãˆã°ï¼Œ2022å¹´ã®å‚è­°é™¢é¸æŒ™ã§ã¯ï¼Œã€Œ1ç¥¨ã®æ ¼å·®ã€ãŒæœ€å¤§ã§3.03å€ã§ã‚ã£ãŸã¨ã•ã‚Œã¦ã„ã¾ã™2ï¼\nç¾åœ¨ï¼Œæ—¥æœ¬ã®éƒ½å¸‚éƒ¨ã¨åœ°æ–¹ã¯ä»¥ä¸‹ã®è¡¨ã®ã‚ˆã†ãªé–¢ä¿‚ã«ã‚ã‚‹ã¨ã•ã‚Œï¼Œã€Œ1ç¥¨ã®æ ¼å·®ã€ãŒã€Œåœ°æ–¹ã§æ–°å¹¹ç·šãŒæ•´å‚™ã•ã‚Œã‚‹ä¸€æ–¹ã§æ±äº¬ã®é€šå‹¤ãƒ©ãƒƒã‚·ãƒ¥ãŒè§£æ¶ˆã•ã‚Œãªã„ã€ã¨ã„ã£ãŸçµŒæ¸ˆåŠ¹ç‡æ€§ã®ä½ä¸‹ãªã©ã‚’å¼•ãèµ·ã“ã™ã“ã¨ãŒå•é¡Œè¦–ã•ã‚Œã¦ã„ã¾ã™3ï¼\n\n\n\n\n\n\n\n\nåœ°åŸŸ\nãŠé‡‘ã®æµã‚Œï¼ˆåœ°æ–¹äº¤ä»˜ç¨ãªã©ï¼‰\næ”¿æ²»çš„å¹³ç­‰ï¼ˆã€Œ1ç¥¨ã®æ ¼å·®ã€ï¼‰\n\n\n\n\néƒ½å¸‚éƒ¨\nåœ°æ–¹ã«ãŠé‡‘ã‚’ã€Œæ”¯æ‰•ã†ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒè»½ã\néƒ½å¸‚éƒ¨ã€Œå†·é‡ã€\n\n\nåœ°æ–¹\néƒ½å¸‚éƒ¨ã‹ã‚‰ãŠé‡‘ã‚’ã€Œå—ã‘å–ã‚‹ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒé‡ã\nåœ°æ–¹ã€Œå„ªé‡ã€\n\n\n\nä¸€æ–¹ã§ï¼Œä»Šå¾Œï¼Œæ±äº¬ä¸€æ¥µé›†ä¸­ãªã©ã«ã‚ˆã‚Šåœ°æ–¹ã®ç¤¾ä¼šèª²é¡ŒãŒä¸€å±¤æ·±åˆ»ã«ãªã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã¾ã™ï¼ãã®ãŸã‚ï¼Œã€Œ1ç¥¨ã®ä¾¡å€¤ã€ã‚’å®Œå…¨ã«ç­‰ã—ãã™ã‚Œã°ï¼Œã‚€ã—ã‚åœ°æ–¹ã®ã€Œå†·é‡ã€ã«ã¤ãªãŒã‚‹ã¨ã„ã£ãŸæ‡¸å¿µã‚‚ã‚ã‚Šã¾ã™ï¼\nã“ã®ã‚ˆã†ã«ï¼Œã€Œ1ç¥¨ã®æ ¼å·®ã€ã®æ˜¯æ­£ã¯ï¼Œæ±ºã—ã¦ç°¡å˜ãªé“ã®ã‚Šã¨ã¯ã„ãˆã¾ã›ã‚“ãŒï¼Œå¼•ãç¶šãæ˜¯æ­£ã«å‘ã‘ãŸå–ã‚Šçµ„ã¿ã‚’é€²ã‚ã¦ã„ãå¿…è¦ãŒã‚ã‚‹ã¨ã„ãˆã‚‹ã§ã—ã‚‡ã†ï¼\n\n\nã“ã“ã¾ã§ç´¹ä»‹ã—ãŸåœ°åŸŸé–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã«åŠ ãˆã¦ï¼Œä¸–ä»£é–“ã«ã‚‚ã€Œ1ç¥¨ã®æ ¼å·®ã€ãŒå­˜åœ¨ã™ã‚‹ã¨ã„ã‚ã‚Œã¦ã„ã¾ã™4ï¼ã“ã‚Œã¯ï¼Œå°‘å­é«˜é½¢åŒ–ã«ã‚ˆã‚Šï¼Œè‹¥å¹´å±¤ã®æœ‰æ¨©è€…æ•°ã«å¯¾ã—ã¦é«˜é½¢è€…å±¤ã®æœ‰æ¨©è€…æ•°ãŒå¤šããªã‚‹ã“ã¨ã«ã‚ˆã‚Šå¼•ãèµ·ã“ã•ã‚Œã‚‹ã‚‚ã®ã§ã™5ï¼\nã•ãã»ã©ç¤ºã—ãŸéƒ½å¸‚ãƒ»åœ°æ–¹éƒ¨ã®é–¢ä¿‚ã¨åŒæ§˜ã«ï¼Œè‹¥å¹´å±¤ã¨é«˜é½¢è€…å±¤ã¯ï¼Œä»¥ä¸‹ã®è¡¨ã®ã‚ˆã†ãªé–¢ä¿‚ã«ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ï¼åœ°æ–¹ã«ãŠã‘ã‚‹äººå£æ¸›å°‘ãƒ»äººæ‰‹ä¸è¶³ãŒæ·±åˆ»ã¨ãªã£ãŸæœ€è¿‘ã«ãªã£ã¦ã‚ˆã†ã‚„ãï¼Œå›½ã¯ï¼Œå°‘å­åŒ–å¯¾ç­–ã‚’å›½ã®æœ€é‡è¦èª²é¡Œã«ä½ç½®ã¥ã‘ã¾ã—ãŸãŒï¼Œã“ã‚Œã¾ã§ï¼Œã“ã†ã—ãŸè‹¥å¹´å±¤å‘ã‘ã®æ”¿ç­–ãŒååˆ†ã«è¡Œã‚ã‚Œãªã‹ã£ãŸ6ã®ã¯ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã®å½±éŸ¿ã«ã‚ˆã‚‹ã‚‚ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼\n\n\n\n\n\n\n\n\nä¸–ä»£\nãŠé‡‘ã®æµã‚Œï¼ˆç¤¾ä¼šä¿éšœè²»ãªã©ï¼‰\næ”¿æ²»çš„å¹³ç­‰ï¼ˆã€Œ1ç¥¨ã®æ ¼å·®ã€ï¼‰\n\n\n\n\nè‹¥å¹´å±¤\né«˜é½¢è€…å±¤ã«ãŠé‡‘ã‚’ã€Œæ”¯æ‰•ã†ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒè»½ã\nè‹¥å¹´å±¤ã€Œå†·é‡ã€\n\n\né«˜é½¢è€…å±¤\nè‹¥å¹´å±¤ã‹ã‚‰ãŠé‡‘ã‚’ã€Œå—ã‘å–ã‚‹ã€\nã€Œ1ç¥¨ã®ä¾¡å€¤ã€ãŒé‡ã\né«˜é½¢è€…å±¤ã€Œå„ªé‡ã€"
  },
  {
    "objectID": "posts/2023/04/quantify-vote-disparity-between-generations.html#ä¸–ä»£é–“ã®1ç¥¨ã®æ ¼å·®ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "href": "posts/2023/04/quantify-vote-disparity-between-generations.html#ä¸–ä»£é–“ã®1ç¥¨ã®æ ¼å·®ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "title": "ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "section": "ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "text": "ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹\nåœ°åŸŸé–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã¯ï¼Œï¼ˆéƒ½å¸‚éƒ¨åŸºæº–ã§ï¼‰ç´„ã€‡å€ã¨ã„ã£ãŸå®šé‡åŒ–ãŒãªã•ã‚Œã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã§ã™ãŒï¼Œä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã«ã¤ã„ã¦ã¯ï¼Œã“ã‚Œã¾ã§ï¼Œã‚ã¾ã‚Šå®šé‡åŒ–ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ï¼\nå˜ç´”ãªå®šé‡åŒ–ã®æ–¹æ³•ã¨ã—ã¦ã¯ï¼Œå¹´é½¢å±¤åˆ¥ã®äººå£ã‚’ä½•ã‚‰ã‹ã®åŸºæº–äººå£ã§å‰²ã‚‹ã¨ã„ã£ãŸã‚‚ã®ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ãŒï¼Œã“ã®ã‚ˆã†ãªæ–¹æ³•ã§ã¯ï¼ŒåŠ é½¢ã«ã‚ˆã‚Šäº¡ããªã‚‹æ–¹ãŒã„ã‚‹ã“ã¨ãŒè€ƒæ…®ã•ã‚Œãšï¼Œã€Œäººå£ãŒå°‘ãªã„ã®ã§100æ­³ä»¥ä¸Šã®1ç¥¨ã®ä¾¡å€¤ãŒè»½ã„ã€ã¨ã„ã£ãŸè©•ä¾¡ã‚’ã™ã‚‹ã“ã¨ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ï¼\nãã“ã§ï¼Œ2020å¹´å›½å‹¢èª¿æŸ»äººå£ã¨2020å¹´ç”Ÿå‘½è¡¨ã‚’ç”¨ã„ã¦ï¼Œä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ï¼ç”Ÿå‘½è¡¨ã¨ã¯ï¼Œã€Œã‚ã‚‹æœŸé–“ã«ãŠã‘ã‚‹æ­»äº¡çŠ¶æ³ãŒä»Šå¾Œå¤‰åŒ–ã—ãªã„ã¨ã®ä»®å®šã®ã‚‚ã¨ã§å„å¹´é½¢ã®è€…ãŒ1å¹´ä»¥å†…ã«æ­»äº¡ã™ã‚‹ç¢ºç‡ãªã©ã®æŒ‡æ¨™ã‚’è¡¨ã—ãŸã‚‚ã®ã€ã§ã™7ï¼\nä»¥ä¸‹ã§ç¤ºã™ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã¯ï¼Œã‚ãã¾ã§ï¼Œã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãç°¡æ˜“çš„ãªè©¦ç®—ã§ã‚ã‚‹ã“ã¨ã«ã”æ³¨æ„ãã ã•ã„ï¼\n\nä½¿ç”¨ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦\nä»Šå›ã¯ï¼Œä»¥ä¸‹ã®è¡¨ã«ç¤ºã™ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ï¼ã“ã“ã§ï¼Œè¡¨ä¸­ã®å®šå¸¸äººå£ï¼ˆnLxï¼‰ã¨ã¯ï¼Œã€Œä¸€å®šã®å‡ºç”Ÿãƒ»ï¼ˆç”Ÿå‘½è¡¨ä¸Šã®ï¼‰æ­»äº¡ç‡ã®ã‚‚ã¨ã§å¾—ã‚‰ã‚Œã‚‹å¹´é½¢éšç´šåˆ¥äººå£ã€ã®ã“ã¨ã§ã™8ï¼\nãƒ‡ãƒ¼ã‚¿å…¥æ‰‹ãƒ»æ•´å½¢æ–¹æ³•ã«ã¤ã„ã¦ã¯ï¼Œä¸‹ã«æŠ˜ã‚ŠãŸãŸã¾ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„ï¼\n\n\n\nå†…å®¹\nå‡ºå…¸\nå…¥æ‰‹æ–¹æ³•\n\n\n\n\nç”·å¥³ãƒ»å¹´é½¢åˆ¥äººå£\n2020å¹´å›½å‹¢èª¿æŸ»\njpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§\ne-Stat APIã‚’ä½¿ç”¨\n\n\nç”·å¥³ãƒ»å¹´é½¢åˆ¥å®šå¸¸äººå£ï¼ˆnLxï¼‰\n2020å¹´ç”Ÿå‘½è¡¨\nURLã‹ã‚‰ã‚¨ã‚¯ã‚»ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’\nãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n\n\n\n\n\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãªã©\nlibrary(tidyverse)\nlibrary(fs)\nlibrary(arrow)\nlibrary(readxl)\nlibrary(jpstat)\n\ntheme_set(theme_light())\n\ndir_create(\"quantify-vote-disparity-between-generations\")\n\n\n\n\n2020å¹´å›½å‹¢èª¿æŸ»äººå£ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿æ•´å½¢\n# jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦2020å¹´å›½å‹¢èª¿æŸ»ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã¾ã™\nif (!file_exists(\"quantify-vote-disparity-between-generations/pop_2020.parquet\")) {\n  # æ³¨æ„: jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯e-Stat APIã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚APIã‚­ãƒ¼ãŒå¿…è¦ã§ã™\n  census_2020 &lt;- estat(keyring::key_get(\"estat-api\"),\n                       \"https://www.e-stat.go.jp/dbview?sid=0003445139\")\n\n  pop_2020 &lt;- census_2020 |&gt;\n    activate(tab) |&gt;\n    select() |&gt;\n  \n    activate(cat01) |&gt;\n    filter(name == \"ã†ã¡æ—¥æœ¬äºº\") |&gt;\n    select() |&gt;\n  \n    activate(cat02) |&gt;\n    rekey(\"sex\") |&gt;\n    filter(name %in% c(\"ç”·\", \"å¥³\")) |&gt;\n    select(name) |&gt;\n  \n    activate(cat03) |&gt;\n    rekey(\"age\") |&gt;\n    select(name) |&gt;\n  \n    activate(area) |&gt;\n    filter(name == \"å…¨å›½\") |&gt;\n    select() |&gt;\n  \n    activate(time) |&gt;\n    select() |&gt;\n  \n    collect(n = \"pop\")\n  \n  pop_2020 &lt;- pop_2020 |&gt; \n    filter(str_detect(age_name, \"^\\\\d+æ­³$\") | age_name == \"100æ­³ä»¥ä¸Š\") |&gt; \n    mutate(sex = as_factor(sex_name),\n           age = case_when(str_detect(age_name, \"^\\\\d+æ­³$\") ~ age_name |&gt; \n                             str_extract(\"\\\\d+\"),\n                           age_name == \"100æ­³ä»¥ä¸Š\" ~ \"100--Inf\") |&gt; \n             as_factor(),\n           pop = parse_number(pop),\n           .keep = \"unused\") |&gt; \n    relocate(sex, age, pop)\n  \n  write_parquet(pop_2020, \"quantify-vote-disparity-between-generations/pop_2020.parquet\") \n}\n\n\n\n\n2020å¹´ç”Ÿå‘½è¡¨ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n# ç¬¬23å›ç”Ÿå‘½è¡¨ï¼ˆç”·ï¼‰\nfile_lifetable_male_2020 &lt;- \"quantify-vote-disparity-between-generations/lifetable_male_2020.xlsx\"\nif (!file_exists(file_lifetable_male_2020)) {\n  curl::curl_download(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000032173232&fileKind=0\", file_lifetable_male_2020) \n}\n\n# ç¬¬23å›ç”Ÿå‘½è¡¨ï¼ˆå¥³ï¼‰\nfile_lifetable_female_2020 &lt;- \"quantify-vote-disparity-between-generations/lifetable_female_2020.xlsx\"\nif (!file_exists(file_lifetable_female_2020)) {\n  curl::curl_download(\"https://www.e-stat.go.jp/stat-search/file-download?statInfId=000032173233&fileKind=0\", file_lifetable_female_2020)\n}\n\n\n\n\n2020å¹´ç”Ÿå‘½è¡¨ã®å®šå¸¸äººå£ã®ãƒ‡ãƒ¼ã‚¿æ•´å½¢\ncol_names_lifetable &lt;- read_excel(file_lifetable_male_2020, \n                        range = \"B3:J5\",\n                        col_names = as.character(1:9)) |&gt; \n  t() |&gt; \n  as_tibble(.name_repair = \\(x) c(\"col_name_1\", \"col_name_2\", \"col_name_3\")) |&gt; \n  unite(\"col_name\", starts_with(\"col_name\"),\n        na.rm = TRUE) |&gt; \n  mutate(col_name = col_name |&gt; \n           str_remove_all(\"\\\\s\")) |&gt; \n  pull(col_name)\n\nrange_lifetable &lt;- \"B6:J127\"\n\nlifetable_male_2020 &lt;- read_excel(file_lifetable_male_2020,\n                                  range = range_lifetable,\n                                  col_names = col_names_lifetable)\n\nlifetable_female_2020 &lt;- read_excel(file_lifetable_female_2020,\n                                    range = range_lifetable,\n                                    col_names = col_names_lifetable)\n\nstatic_pop_2020 &lt;- list(ç”· = lifetable_male_2020,\n                        å¥³ = lifetable_female_2020) |&gt; \n  bind_rows(.id = \"sex\") |&gt; \n  rename(age = å¹´é½¢_x,\n         static_pop = å®šå¸¸äººå£_nLx_äºº) |&gt; \n  select(sex, age, static_pop) |&gt; \n  filter(str_ends(age, \"å¹´\")) |&gt; \n  mutate(sex = as_factor(sex),\n         age = age |&gt; \n           str_extract(\"^\\\\d+\") |&gt; \n           parse_integer(),\n         # 100æ­³ä»¥ä¸Šã¯ã¾ã¨ã‚ã‚‹\n         age = if_else(age &gt;= 100,\n                       \"100--Inf\",\n                       as.character(age)) |&gt; \n           as_factor()) |&gt; \n  summarise(static_pop = sum(static_pop),\n            .by = c(sex, age))\n\nwrite_parquet(static_pop_2020, \"quantify-vote-disparity-between-generations/static_pop_2020.parquet\")\n\n\n\n\nå›½å‹¢èª¿æŸ»ã®äººå£ãƒ»ç”Ÿå‘½è¡¨ã®å®šå¸¸äººå£ã®ã€Œäººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã€ã®æ¯”è¼ƒ\nå…¥æ‰‹ãƒ»æ•´å½¢ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ä»¥ä¸‹ã®ã‚°ãƒ©ãƒ•ã¯ï¼Œ2020å¹´å›½å‹¢èª¿æŸ»ã®äººå£ã«ç”Ÿå‘½è¡¨ã®å®šå¸¸äººå£ï¼ˆèµ¤ç·šï¼‰ã‚’é‡ã­ãŸã‚‚ã®ã§ã™9ï¼ãŸã ã—ï¼Œå®šå¸¸äººå£ã¯ï¼Œ0æ­³å®šå¸¸äººå£ãŒ2020å¹´å›½å‹¢èª¿æŸ»ã®0æ­³äººå£ã¨ç­‰ã—ããªã‚‹ã‚ˆã†ã«åŸºæº–åŒ–ã—ã¦ã„ã¾ã™10ï¼ã¾ãŸï¼Œ100æ­³ä»¥ä¸Šã®äººå£ãƒ»å®šå¸¸äººå£ã«ã¤ã„ã¦ã¯ï¼Œ100æ­³ã«é›†è¨ˆã—ã¦è¡¨ç¤ºã—ã¦ã„ã¾ã™ï¼\n\n\näººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®å›³ç¤º\n# 100æ­³ä»¥ä¸Šã‚’æ•°å€¤100ã§ç½®ãæ›ãˆã‚‹\nas_integer_age &lt;- function(age) {\n  if_else(age == \"100--Inf\",\n          100,\n          parse_integer(as.character(age),\n                        na = \"100--Inf\"))\n}\n\npop_2020 &lt;- read_parquet(\"quantify-vote-disparity-between-generations/pop_2020.parquet\") |&gt; \n  mutate(age = as_integer_age(age))\nstatic_pop_2020 &lt;- read_parquet(\"quantify-vote-disparity-between-generations/static_pop_2020.parquet\") |&gt; \n  mutate(age = as_integer_age(age))\n\nratio_pop_static_pop &lt;- static_pop_2020 |&gt; \n  filter(age == 0) |&gt; \n  select(!age) |&gt; \n  left_join(pop_2020 |&gt; \n              filter(age == 0) |&gt; \n              select(!age),\n            by = join_by(sex)) |&gt; \n  mutate(ratio_pop_static_pop = pop / static_pop,\n         .keep = \"unused\")\n\nstatic_pop_2020 &lt;- static_pop_2020 |&gt; \n  left_join(ratio_pop_static_pop,\n            by = join_by(sex)) |&gt; \n  mutate(pop = static_pop * ratio_pop_static_pop,\n         .keep = \"unused\")\n\npop_2020 |&gt;\n  mutate(pop = if_else(sex == \"ç”·\",\n                       -pop,\n                       pop)) |&gt; \n  ggplot(aes(age, pop,\n             fill = sex)) +\n  geom_col() +\n  geom_line(data = static_pop_2020 |&gt; \n               mutate(pop = if_else(sex == \"ç”·\",\n                                    -pop,\n                                    pop)),\n            aes(group = sex,\n                color = \"å®šå¸¸äººå£\\nï¼ˆå‚è€ƒå€¤ï¼‰\")) +\n  scale_x_continuous(\"å¹´é½¢\",\n                     breaks = seq(0, 100, 10)) +\n  scale_y_continuous(\"äººå£ï¼»åƒäººï¼½\",\n                     labels = \\(x) {\n                       scales::label_comma(scale = 1e-3)(abs(x))\n                     }) +\n  scale_fill_manual(\"æ€§åˆ¥\",\n                    values = c(ç”· = \"cornflowerblue\",\n                               å¥³ = \"lightcoral\")) +\n  scale_color_manual(NULL,\n                     values = c(`å®šå¸¸äººå£\\nï¼ˆå‚è€ƒå€¤ï¼‰` = \"red\")) +\n  coord_flip() +\n  guides(fill = guide_legend(order = 1),\n         color = guide_legend(order = 2))\n\n\n\n\n\n2020å¹´ã®äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚ˆã‚Šï¼Œ70æ­³å‰åŠãŠã‚ˆã³40æ­³å¾ŒåŠã«ãŠã„ã¦äººå£ã®ãƒ”ãƒ¼ã‚¯ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ã“ã‚Œã‚‰ã¯ï¼Œãã‚Œãã‚Œã€Œå›£å¡Šä¸–ä»£ã€ã€Œå›£å¡Šã‚¸ãƒ¥ãƒ‹ã‚¢ã€ã¨å‘¼ã°ã‚Œã‚‹ä¸–ä»£ã«ã‚ãŸã‚Šã¾ã™11ï¼ä¸€æ–¹ã§ï¼Œè‹¥å¹´å±¤ã®äººå£ã¯ï¼Œã€Œå›£å¡Šä¸–ä»£ã€ã€Œå›£å¡Šã‚¸ãƒ¥ãƒ‹ã‚¢ã€ã®äººå£ã‚’å¤§ããä¸‹å›ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šï¼Œè¿‘å¹´ã®å°‘å­åŒ–ã®æ·±åˆ»ã•ãŒã¿ã¦ã¨ã‚Œã¾ã™ï¼\n\n\nã€Œäººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã€ã«åŸºã¥ãä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã®å®šé‡åŒ–\nèµ¤ç·šã®å®šå¸¸äººå£ï¼ˆå‚è€ƒå€¤ï¼‰ã«å¯¾ã™ã‚‹å›½å‹¢èª¿æŸ»äººå£ã®æ¯”ã‚’ç”¨ã„ã¦ï¼Œä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nä»¥ä¸‹ã®ã‚°ãƒ©ãƒ•ã¯ï¼Œé¸æŒ™æ¨©ã‚’æœ‰ã™ã‚‹18æ­³ä»¥ä¸Šã‚’å¯¾è±¡ã«ï¼ŒãŠãŠã‚ˆã10æ­³é–“éš”ã§ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ãŸã‚‚ã®ã§ã™ï¼ãŸã ã—ï¼Œã“ã“ã§ã¯18ï½29æ­³ã®ã€Œ1ç¥¨ã®ä¾¡å€¤ã€ã‚’1ã¨ã—ã¦åŸºæº–åŒ–ã—ã¦ã„ã¾ã™ï¼\nã‚°ãƒ©ãƒ•ã‚ˆã‚Šï¼Œ40ä»£ï½60ä»£ã®1ç¥¨ã¯ï¼Œ18ï½29æ­³ã®ç´„1.5å€ï¼Œ70ä»£ã®1ç¥¨ã¯ï¼Œ18ï½29æ­³ã®ç´„1.7å€ã®ä¾¡å€¤ã‚’æœ‰ã™ã‚‹ã¨ã„ã†è©¦ç®—ãŒå¾—ã‚‰ã‚Œã¾ã—ãŸï¼ã¾ãŸï¼Œï¼ˆç”Ÿå‘½è¡¨ã®æ€§è³ªã«ã‚ˆã‚‹ã‚‚ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒï¼‰ã€Œå›£å¡Šä¸–ä»£ã€ã€Œå›£å¡Šã‚¸ãƒ¥ãƒ‹ã‚¢ã€ã§ã¯ãªã„30ä»£ã‚„80ä»£ä»¥ä¸Šã®1ç¥¨ã®ä¾¡å€¤ã¯ï¼Œ40ä»£ï½60ä»£ãƒ»70ä»£ã¨æ¯”ã¹ã‚‹ã¨ä½ããªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸï¼\n\n\nä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã®å®šé‡åŒ–\nvote_disparity &lt;- pop_2020 |&gt; \n  left_join(static_pop_2020 |&gt; \n              rename(static_pop = pop),\n            by = join_by(sex, age)) |&gt;\n  filter(age &gt;= 18) |&gt; \n  mutate(ageclass = case_when(between(age, 18, 29) ~ \"18ï½29æ­³\",\n                              between(age, 30, 39) ~ \"30ä»£\",\n                              between(age, 40, 49) ~ \"40ä»£\",\n                              between(age, 50, 59) ~ \"50ä»£\",\n                              between(age, 60, 69) ~ \"60ä»£\",\n                              between(age, 70, 79) ~ \"70ä»£\",\n                              between(age, 80, 89) ~ \"80ä»£\",\n                              90 &lt;= age ~ \"90ä»£ä»¥ä¸Š\")) |&gt; \n  summarise(across(c(pop, static_pop),\n                   sum),\n            .by = ageclass) |&gt; \n  mutate(vote_disparity = pop / static_pop,\n         .keep = \"unused\")\n\nvote_disparity &lt;- vote_disparity |&gt; \n  bind_cols(vote_disparity |&gt; \n              filter(ageclass == \"18ï½29æ­³\") |&gt; \n              select(!ageclass) |&gt; \n              rename(vote_disparity_18to29 = vote_disparity)) |&gt; \n  mutate(vote_disparity = vote_disparity / vote_disparity_18to29,\n         .keep = \"unused\")\n\nplot_vote_disparity &lt;- vote_disparity |&gt; \n  ggplot(aes(ageclass, vote_disparity)) +\n  geom_col(fill = \"lightblue\") +\n  geom_text(aes(label = scales::label_comma(accuracy = 1e-2)(vote_disparity)),\n            y = 1,\n            vjust = -0.5,\n            color = \"red\") +\n  geom_hline(yintercept = 1,\n             color = \"red\",\n             linetype = \"dashed\") +\n  scale_x_discrete(\"å¹´é½¢å±¤\") +\n  scale_y_continuous(\"ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ï¼ˆ18ï½29æ­³åŸºæº–ï¼‰\")\n\n\nggsave(\"quantify-vote-disparity-between-generations/plot_vote_disparity.png\",\n       plot = plot_vote_disparity)\n\nplot_vote_disparity"
  },
  {
    "objectID": "posts/2023/04/quantify-vote-disparity-between-generations.html#ã¾ã¨ã‚",
    "href": "posts/2023/04/quantify-vote-disparity-between-generations.html#ã¾ã¨ã‚",
    "title": "ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "section": "ã¾ã¨ã‚",
    "text": "ã¾ã¨ã‚\nã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹å›½å‹¢èª¿æŸ»ã¨ç”Ÿå‘½è¡¨ã‚’ç”¨ã„ã¦ï¼Œä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã¾ã—ãŸï¼\nå®Ÿã¯ï¼Œè‹¥è€…ã®æŠ•ç¥¨ç‡ã®ä½ã•ã‚‚ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã®å¤§ããªè¦å› ã¨ãªã£ã¦ã„ã‚‹ã¨ã„ã‚ã‚Œã¦ã„ã¾ã™ï¼ä»Šå¾Œã¯ï¼Œä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã«å¯¾ã™ã‚‹è­°è«–ã‚’æ·±ã‚ã¤ã¤ï¼Œè‹¥è€…ã®æŠ•ç¥¨ç‡ãŒä¸ŠãŒã‚‹ã‚ˆã†ãªé­…åŠ›çš„ãªæ”¿ç­–ã‚’å¤šãæ‰“ã¡å‡ºã—ã¦ã„ãã“ã¨ãŒå¿…è¦ã§ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ï¼"
  },
  {
    "objectID": "posts/2023/04/quantify-vote-disparity-between-generations.html#footnotes",
    "href": "posts/2023/04/quantify-vote-disparity-between-generations.html#footnotes",
    "title": "ä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹",
    "section": "è„šæ³¨",
    "text": "è„šæ³¨\n\n\nåœ°æ–¹å…¬å…±å›£ä½“ã®è­°å“¡ãƒ»é•·ã‚’æ±ºã‚ã‚‹ç¬¬20å›çµ±ä¸€åœ°æ–¹é¸æŒ™ãŒï¼Œ2023å¹´4æœˆ9æ—¥ï¼ˆæ—¥ï¼‰ã¨2023å¹´4æœˆ23æ—¥ï¼ˆæ—¥ï¼‰ã«è¡Œã‚ã‚Œã¾ã—ãŸï¼â†©ï¸\nå‚é™¢é¸ â€œ1ç¥¨ã®æ ¼å·® æœ€å¤§3.03å€â€ æœ€é«˜è£ãŒå¤§æ³•å»·ã§å¯©ç†ã¸â†©ï¸\nã€Œä¸€ç¥¨ã®æ ¼å·®ã€ã®å•é¡Œç‚¹ã¨ã¯ï¼Ÿâ†©ï¸\nä¸–ä»£é–“ã«ãŠã‘ã‚‹ã€Œ1ç¥¨ã®æ ¼å·®ã€â†©ï¸\nã“ã†ã„ã£ãŸè€ƒãˆæ–¹ã¯ï¼Œæ±äº¬ä¸€æ¥µé›†ä¸­ã«ä¼´ã†éƒ½å¸‚éƒ¨ã¸ã®äººå£é›†ç©ã®ã‚‚ã¨ã§ï¼Œã€Œ1ç¥¨ã®ä¾¡å€¤ã€ã‚’å®Œå…¨ã«ç­‰ã—ãã™ã‚Œã°ï¼Œã‚€ã—ã‚åœ°æ–¹ã€Œå†·é‡ã€ã«ã¤ãªãŒã‚‹ã¨ã„ã£ãŸè€ƒãˆæ–¹ã¨ã‚‚é¡ä¼¼ã—ã¾ã™ï¼â†©ï¸\né¸æŠã™ã‚‹æœªæ¥ ï¼ˆ4ï¼‰å°‘å­åŒ–å¯¾ç­–â†©ï¸\nç”Ÿå‘½è¡¨ã«ã¤ã„ã¦â†©ï¸\nå‚è€ƒè³‡æ–™ï¼‘ç”Ÿå‘½è¡¨è«¸é–¢æ•°ã®å®šç¾©â†©ï¸\nèµ¤ç·šã§ç¤ºã—ãŸå®šå¸¸äººå£ï¼ˆå‚è€ƒå€¤ï¼‰ã¯ï¼Œ2020å¹´ã®0æ­³ã®ç”·å¥³ãŒï¼Œæ­»äº¡ç‡ä¸€å®šã®ä»®å®šã®ã‚‚ã¨ã§ï¼Œã‚ã‚‹å¹´é½¢ã§ä½•äººç”Ÿå­˜ã—ã¦ã„ã‚‹ã‹ã‚’è¡¨ã—ã¦ã„ã¾ã™ï¼â†©ï¸\n0æ­³äººå£ã®ç”·å¥³æ¯”ã¯ï¼ŒãŠãŠã‚ˆã105ï¼š100ã¨ãªã£ã¦ã„ã¾ã™ï¼â†©ï¸\nã€Œäººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã€ã‹ã‚‰æ—¥æœ¬ã®æœªæ¥ãŒè¦‹ãˆã¦ãã‚‹ï¼ï¼Ÿï½é«˜é½¢åŒ–ã¨ã€Œå›£å¡Šä¸–ä»£ã€ã€å°‘å­åŒ–ã¨ã€Œå›£å¡Šã‚¸ãƒ¥ãƒ‹ã‚¢ã€ï½â†©ï¸"
  },
  {
    "objectID": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html",
    "href": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html",
    "title": "Rã§äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹",
    "section": "",
    "text": "å›½ç«‹ç¤¾ä¼šä¿éšœãƒ»äººå£å•é¡Œç ”ç©¶æ‰€ï¼ˆç¤¾äººç ”ï¼‰ã®å…¬é–‹ã—ã¦ã„ã‚‹äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®æ¨ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‚è€ƒã«ï¼Œä»¥ä¸‹ã®ã‚ˆã†ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Rã®ggplot2ã§ä½œæˆã—ã¦ã¿ã¾ã—ãŸï¼"
  },
  {
    "objectID": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html#ã“ã®è¨˜äº‹ã«ã¤ã„ã¦",
    "href": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html#ã“ã®è¨˜äº‹ã«ã¤ã„ã¦",
    "title": "Rã§äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹",
    "section": "",
    "text": "å›½ç«‹ç¤¾ä¼šä¿éšœãƒ»äººå£å•é¡Œç ”ç©¶æ‰€ï¼ˆç¤¾äººç ”ï¼‰ã®å…¬é–‹ã—ã¦ã„ã‚‹äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®æ¨ç§»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‚è€ƒã«ï¼Œä»¥ä¸‹ã®ã‚ˆã†ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Rã®ggplot2ã§ä½œæˆã—ã¦ã¿ã¾ã—ãŸï¼"
  },
  {
    "objectID": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html#å›½å‹¢èª¿æŸ»ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å–å¾—",
    "href": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html#å›½å‹¢èª¿æŸ»ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å–å¾—",
    "title": "Rã§äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹",
    "section": "å›½å‹¢èª¿æŸ»ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å–å¾—",
    "text": "å›½å‹¢èª¿æŸ»ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å–å¾—\nã¾ãšï¼Œe-Statã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹å›½å‹¢èª¿æŸ»ã®ç”·å¥³ãƒ»5æœ€éšç´šåˆ¥äººå£ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’Rã®jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã¦å–å¾—ã—ã¾ã™ï¼\njpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰e-Stat APIã‚’ç”¨ã„ã‚‹ãŸã‚ã«ã¯ï¼Œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³IDï¼ˆappIdï¼‰ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼\n\nlibrary(tidyverse)\nlibrary(jpstat)\n\n\n# ã”è‡ªèº«ã®appIdã«ç½®ãæ›ãˆã¦ãã ã•ã„\nSys.setenv(ESTAT_API_KEY = \"Your appId\")\n\n\ncensus &lt;- estat(statsDataId = \"https://www.e-stat.go.jp/dbview?sid=0003410380\")\n\npop &lt;- census |&gt; \n  activate(tab) |&gt; \n  filter(name == \"äººå£\") |&gt; \n  select() |&gt; \n  \n  # æ€§åˆ¥ã®æŠ½å‡º\n  activate(cat01) |&gt; \n  rekey(\"sex\") |&gt; \n  filter(name %in% c(\"ç”·\", \"å¥³\")) |&gt; \n  select(name) |&gt; \n  \n  # å¹´é½¢éšç´šã®æŠ½å‡º\n  activate(cat02) |&gt; \n  rekey(\"ageclass\") |&gt; \n  filter(str_detect(name, \"^\\\\d+ï½\\\\d+æ­³$\") |\n           name == \"85æ­³ä»¥ä¸Š\" |\n           name == \"110æ­³ä»¥ä¸Š\") |&gt; \n  select(name) |&gt; \n  \n  # å¹´ã®æŠ½å‡º\n  activate(time) |&gt; \n  rekey(\"year\") |&gt; \n  filter(str_detect(name, \"^\\\\d+å¹´$\")) |&gt; \n  select(name) |&gt; \n  \n  # e-Statãƒ‡ãƒ¼ã‚¿ã®å–å¾—\n  collect(n = \"pop\") |&gt; \n  \n  rename_with(~ .x |&gt; \n                str_remove(\"_name$\")) |&gt; \n  mutate(sex = as_factor(sex),\n         year = parse_number(year),\n         \n         # å„å¹´é½¢éšç´šã®æœ€ä½å¹´é½¢ã‚’å–å¾—\n         age_from = ageclass |&gt; \n           str_extract(\"^\\\\d+\") |&gt; \n           stringi::stri_trans_nfkc() |&gt; \n           as.integer(),\n         \n         # æœ€é«˜ã®å¹´é½¢éšç´šã‚’ã€Œ85æ­³ä»¥ä¸Šã€ã¨ã™ã‚‹\n         ageclass = case_when(age_from &gt;= 85 ~ \"85æ­³ä»¥ä¸Š\",\n                              TRUE ~ ageclass) |&gt; \n           as_factor(),\n         \n         # å¹´é½¢å±¤ã‚’è¿½åŠ \n         agegroup = case_when(between(age_from, 0, 10) ~ \"å¹´å°‘äººå£\",\n                              between(age_from, 15, 60) ~ \"ç”Ÿç”£å¹´é½¢äººå£\",\n                              between(age_from, 65, 70) ~ \"å‰æœŸè€å¹´äººå£\",\n                              age_from &gt;= 75 ~ \"å¾ŒæœŸè€å¹´äººå£\") |&gt; \n           as_factor(),\n         pop = parse_number(pop)) |&gt; \n  \n  # ã€Œ85æ­³ä»¥ä¸Šã€äººå£ã‚’é›†è¨ˆ\n  group_by(year, sex, ageclass, agegroup) |&gt; \n  summarise(pop = sum(pop),\n            .groups = \"drop\")\n\nThe total number of data is 796.\n\nknitr::kable(head(pop))\n\n\n\n\nyear\nsex\nageclass\nagegroup\npop\n\n\n\n\n1920\nç”·\nï¼ï½ï¼”æ­³\nå¹´å°‘äººå£\n3752627\n\n\n1920\nç”·\nï¼•ï½ï¼™æ­³\nå¹´å°‘äººå£\n3467156\n\n\n1920\nç”·\n10ï½14æ­³\nå¹´å°‘äººå£\n3089225\n\n\n1920\nç”·\n15ï½19æ­³\nç”Ÿç”£å¹´é½¢äººå£\n2749022\n\n\n1920\nç”·\n20ï½24æ­³\nç”Ÿç”£å¹´é½¢äººå£\n2316479\n\n\n1920\nç”·\n25ï½29æ­³\nç”Ÿç”£å¹´é½¢äººå£\n2008005"
  },
  {
    "objectID": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html#äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ",
    "href": "posts/2023/01/create-an-animation-of-a-population-pyramid-in-r.html#äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ",
    "title": "Rã§äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹",
    "section": "äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ",
    "text": "äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ\nRã®gganimateãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ggplot2ã®ã‚°ãƒ©ãƒ•ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\nlibrary(gganimate)\n\nWarning: package 'gganimate' was built under R version 4.3.1\n\n# å¹´é½¢å±¤ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿\nagegroup &lt;- pop |&gt; \n  group_by(sex, agegroup) |&gt;\n  summarise(ageclass = mean(as.integer(ageclass)),\n            .groups = \"drop\") |&gt; \n  mutate(hjust = case_when(sex == \"ç”·\" ~ 1.25,\n                           sex == \"å¥³\" ~ -0.25))\n\npoppyramid &lt;- pop |&gt; \n  \n  # äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã‚’ä½œæˆã™ã‚‹ãŸã‚ç”·æ€§äººå£ã‚’ãƒã‚¤ãƒŠã‚¹ã«å¤‰æ›\n  mutate(pop = if_else(sex == \"ç”·\", -pop, pop)) |&gt; \n  \n  ggplot(aes(ageclass, pop,\n             group = sex,\n             fill = agegroup)) +\n  geom_col(show.legend = FALSE) +\n  geom_text(data = agegroup,\n            aes(label = agegroup,\n                hjust = hjust),\n            y = 0) +\n  scale_x_discrete(NULL) +\n  scale_y_continuous(\"äººå£ï¼»åƒäººï¼½\",\n                     \n                     # ãƒ©ãƒ™ãƒ«ã‚’çµ¶å¯¾å€¤ãƒ»åƒäººå˜ä½ã«å¤‰æ›\n                     labels = purrr::compose(scales::label_comma(scale = 1e-3), abs)) +\n  scale_fill_brewer(palette = \"Set2\") +\n  coord_flip() +\n  facet_wrap(~ sex,\n             scales = \"free_x\") +\n  labs(title = \"{frame_time %/% 5 * 5}å¹´\") +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  \n  # ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤‰æ›\n  transition_time(year)\n\n# å¹…ãƒ»é«˜ã•ã‚’å¤‰æ›´\nanimate(poppyramid, \n        width = 800,\n        height = 600,\n        res = 150,\n        renderer = gifski_renderer())"
  },
  {
    "objectID": "posts/2022/06/use-parquet-instead-of-csv-ja.html",
    "href": "posts/2022/06/use-parquet-instead-of-csv-ja.html",
    "title": "CSVã®ä»£ã‚ã‚Šã«Parquetã‚’ä½¿ã£ã¦ã¿ã‚ˆã†",
    "section": "",
    "text": "æœ¬è¨˜äº‹ã§ã¯ï¼ŒCSVã®ä»£æ›¿ã¨ã—ã¦æœ‰æœ›ã‹ã¤ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿åˆ†æã«ã‚‚é©ã—ã¦ã„ã‚‹Parquetã‚’ç´¹ä»‹ã—ã¾ã™ï¼\nã•ã¦ï¼Œãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆData Framesï¼‰ã¯ï¼Œãƒ‡ãƒ¼ã‚¿åˆ†æã«ãŠã„ã¦æœ€ã‚‚åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®1ã¤ã§ã™ï¼Rã®tibbleãƒ»dplyrã‚„Pythonã®pandasãªã©ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ æ“ä½œã®ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ãˆã°ï¼Œã“ã‚Œã¾ã§Excelãªã©ã®è¡¨è¨ˆç®—ã‚½ãƒ•ãƒˆã§è¡Œã£ã¦ã„ãŸãƒ‡ãƒ¼ã‚¿åˆ†æã‚’ã•ã‚‰ã«åŠ¹ç‡çš„ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼\nã“ã®ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ„ãƒ¼ãƒ«ãŒå……å®Ÿã—ã¦ã„ã‚‹ä¸€æ–¹ã§ï¼Œãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«ã¯Excelãªã©ã¨ã®äº’æ›æ€§ãŒé«˜ã„CSVãŒæœªã ã«åºƒãä½¿ã‚ã‚Œã¦ã„ã¾ã™ï¼ã—ã‹ã—ï¼ŒCSVã¯ï¼Œå¿…ãšã—ã‚‚ãƒ‡ãƒ¼ã‚¿åˆ†æã«é©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¨ã¯è¨€ãˆã¾ã›ã‚“ï¼ãã“ã§ï¼ŒCSVã®ä»£æ›¿ã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šããªã£ã¦ã„ã‚‹Parquetã‚’CSVã¨æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼"
  },
  {
    "objectID": "posts/2022/06/use-parquet-instead-of-csv-ja.html#ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™",
    "href": "posts/2022/06/use-parquet-instead-of-csv-ja.html#ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™",
    "title": "CSVã®ä»£ã‚ã‚Šã«Parquetã‚’ä½¿ã£ã¦ã¿ã‚ˆã†",
    "section": "ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™",
    "text": "ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™\nCSVã¨Parquetã‚’æ¯”è¼ƒã™ã‚‹ãŸã‚ï¼Œã¾ãšã¯ï¼Œãƒ‡ãƒ¼ã‚¿åˆ†æã«ã‚ã‚ŠãŒã¡ãªã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã¾ã—ã‚‡ã†ï¼ä»Šå›ã¯ï¼Œtidyrãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§æä¾›ã•ã‚Œã¦ã„ã‚‹who ï¼ˆä¸–ç•Œä¿å¥æ©Ÿé–¢ï¼ˆWHOï¼‰çµæ ¸ãƒ‡ãƒ¼ã‚¿ï¼‰ã‹ã‚‰ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ã¤ãã‚Šã¾ã™ï¼\nè¿‘å¹´ï¼Œãƒ‡ãƒ¼ã‚¿åˆ†æã§ã¯ï¼Œæ•´ç„¶ãƒ‡ãƒ¼ã‚¿ï¼ˆtidy dataï¼‰ã®æ¦‚å¿µãŒæ™®åŠã—ã¦ã„ã¾ã™ï¼tidy dataã¯ï¼Œå€‹ã€…ã®å¤‰æ•°ãŒ1ã¤ã®åˆ—ã‚’ãªã—ï¼Œå€‹ã€…ã®è¦³æ¸¬ï¼ˆå€¤ï¼‰ãŒ1ã¤ã®è¡Œã‚’ãªã™ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã§ã™ï¼\nãã‚Œã§ã¯ï¼Œwhoã¯ï¼Œtidy dataã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿwhoã«ã¯ï¼Œ\"new_sp_m014\" ï½\"newrel_f65\" ã¨ã„ã£ãŸãŸãã•ã‚“ã®åˆ—ãŒå­˜åœ¨ã—ã¾ã™ãŒï¼Œã“ã‚Œã‚‰ã«ã¯ï¼Œ1åˆ—ã”ã¨ã«ï¼Œè¨ºæ–­çµæœï¼ˆspã‚„selï¼‰ãƒ»æ€§åˆ¥ï¼ˆmã¨fï¼‰ãƒ»å¹´é½¢éšç´šï¼ˆ014ã‚„65ï¼‰ã¨ã„ã£ãŸè¤‡æ•°ã®å¤‰æ•°ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼ãã®ãŸã‚ï¼Œwho ã¯ï¼Œtidy dataã§ãªã„ã¨ã„ãˆã¾ã™ï¼ãã“ã§ï¼Œã“ã¡ã‚‰ã«å¾“ã£ã¦tidy dataã§ã‚ã‚‹who_longerã«å¤‰å½¢ã—ã¾ã™ï¼\nãƒ‡ãƒ¼ã‚¿åˆ†æã§ã¯ï¼Œwho ã‚ˆã‚Štidy dataã§ã‚ã‚‹who_longer ã®ã»ã†ã‚’åˆ†æãŒè¡Œã„ã‚„ã™ã„ä¸€æ–¹ã§ï¼Œè¡Œæ•°ã¯whoï¼ˆç´„7,000è¡Œï¼‰ã‚ˆã‚Šwho_longer ï¼ˆç´„400,000è¡Œï¼‰ã®ã»ã†ãŒç´„50å€å¤šã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ãã®ãŸã‚ï¼Œtidy dataã§ã‚ã‚‹who_longerã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚’ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹CSVã§ä¿å­˜ã™ã‚‹ã¨å®¹é‡ãŒå¢—å¤§ã—ã¦ã—ã¾ã„ã¾ã™ï¼\nã“ã®ã‚ˆã†ã«ï¼Œtidy dataã¯ãƒ‡ãƒ¼ã‚¿åˆ†æã«é©ã—ã¦ã„ã‚‹ä¸€æ–¹ã§ï¼ŒCSVã®ã‚ˆã†ãªãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ä¿å­˜ã«é©ã—ã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ã—ã‹ã—ï¼Œã“ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ä¿å­˜ä¸Šã®èª²é¡Œã¯Parquetã‚’ä½¿ãˆã°è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\nã“ã“ã§ï¼Œtidy dataã§ãªã„who ã¨tidy dataã§ã‚ã‚‹who_longer ã‚’è¦‹æ¯”ã¹ã¦ã¿ã¾ã—ã‚‡ã†ï¼\n\nlibrary(tidyverse)\n\nWarning: package 'ggplot2' was built under R version 4.2.3\n\n\nWarning: package 'tibble' was built under R version 4.2.3\n\n\nWarning: package 'dplyr' was built under R version 4.2.3\n\nlibrary(fs)\n\n\n\nã‚³ãƒ¼ãƒ‰\nlevels_gender &lt;- c(\"f\", \"m\")\nlevels_age &lt;- c(\"014\", \"1524\", \"2534\", \"3544\", \"4554\", \"5564\", \"65\")\n\nwho_longer &lt;- who |&gt; \n  pivot_longer(cols = new_sp_m014:newrel_f65,\n               names_to = c(\"diagnosis\", \"gender\", \"age\"), \n               names_pattern = \"new_?(.*)_(.)(.*)\",\n               names_transform = list(gender = ~ .x |&gt; \n                                        readr::parse_factor(levels = levels_gender),\n                                      age = ~ .x |&gt; \n                                        readr::parse_factor(levels = levels_age,\n                                                            ordered = TRUE)),\n               values_to = \"count\")\n\n\n\n# ãƒ‡ãƒ¼ã‚¿æ•´å½¢å‰\nprint(who, n = 5)\n\n# A tibble: 7,240 Ã— 60\n  country   iso2  iso3   year new_sp_m014 new_sp_m1524 new_sp_m2534 new_sp_m3544\n  &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;\n1 Afghanisâ€¦ AF    AFG    1980          NA           NA           NA           NA\n2 Afghanisâ€¦ AF    AFG    1981          NA           NA           NA           NA\n3 Afghanisâ€¦ AF    AFG    1982          NA           NA           NA           NA\n4 Afghanisâ€¦ AF    AFG    1983          NA           NA           NA           NA\n5 Afghanisâ€¦ AF    AFG    1984          NA           NA           NA           NA\n# â„¹ 7,235 more rows\n# â„¹ 52 more variables: new_sp_m4554 &lt;dbl&gt;, new_sp_m5564 &lt;dbl&gt;,\n#   new_sp_m65 &lt;dbl&gt;, new_sp_f014 &lt;dbl&gt;, new_sp_f1524 &lt;dbl&gt;,\n#   new_sp_f2534 &lt;dbl&gt;, new_sp_f3544 &lt;dbl&gt;, new_sp_f4554 &lt;dbl&gt;,\n#   new_sp_f5564 &lt;dbl&gt;, new_sp_f65 &lt;dbl&gt;, new_sn_m014 &lt;dbl&gt;,\n#   new_sn_m1524 &lt;dbl&gt;, new_sn_m2534 &lt;dbl&gt;, new_sn_m3544 &lt;dbl&gt;,\n#   new_sn_m4554 &lt;dbl&gt;, new_sn_m5564 &lt;dbl&gt;, new_sn_m65 &lt;dbl&gt;, â€¦\n\n# ãƒ‡ãƒ¼ã‚¿æ•´å½¢å¾Œ\nprint(who_longer, n = 5)\n\n# A tibble: 405,440 Ã— 8\n  country     iso2  iso3   year diagnosis gender age   count\n  &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;fct&gt;  &lt;ord&gt; &lt;dbl&gt;\n1 Afghanistan AF    AFG    1980 sp        m      014      NA\n2 Afghanistan AF    AFG    1980 sp        m      1524     NA\n3 Afghanistan AF    AFG    1980 sp        m      2534     NA\n4 Afghanistan AF    AFG    1980 sp        m      3544     NA\n5 Afghanistan AF    AFG    1980 sp        m      4554     NA\n# â„¹ 405,435 more rows"
  },
  {
    "objectID": "posts/2022/06/use-parquet-instead-of-csv-ja.html#csvparquetã®ä¿å­˜æ–¹æ³•",
    "href": "posts/2022/06/use-parquet-instead-of-csv-ja.html#csvparquetã®ä¿å­˜æ–¹æ³•",
    "title": "CSVã®ä»£ã‚ã‚Šã«Parquetã‚’ä½¿ã£ã¦ã¿ã‚ˆã†",
    "section": "CSVãƒ»Parquetã®ä¿å­˜æ–¹æ³•",
    "text": "CSVãƒ»Parquetã®ä¿å­˜æ–¹æ³•\nRã§ã¯ï¼Œwrite_csv() ã§CSVã‚’ä¿å­˜ã§ãã¾ã™ï¼åŒæ§˜ã«ï¼Œarrowãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®write_parquet() ã§Parquetã‚’ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼who_longerã‚’CSVã¨Parquetã§ä¿å­˜ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nCSVã¨Parquetã§ã¯ï¼Œã©ã¡ã‚‰ã‚‚ç°¡å˜ã«ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãŒã§ãã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼\n\nlibrary(arrow)\n\nWarning: package 'arrow' was built under R version 4.2.3\n\n# CSVã‚’ä¿å­˜\nwrite_csv(who_longer, \"who_longer.csv\")\n\n# Parquetã‚’ä¿å­˜\nwrite_parquet(who_longer, \"who_longer.parquet\")"
  },
  {
    "objectID": "posts/2022/06/use-parquet-instead-of-csv-ja.html#parquetã®ãƒ¡ãƒªãƒƒãƒˆcsvã¨ã®æ¯”è¼ƒ",
    "href": "posts/2022/06/use-parquet-instead-of-csv-ja.html#parquetã®ãƒ¡ãƒªãƒƒãƒˆcsvã¨ã®æ¯”è¼ƒ",
    "title": "CSVã®ä»£ã‚ã‚Šã«Parquetã‚’ä½¿ã£ã¦ã¿ã‚ˆã†",
    "section": "Parquetã®ãƒ¡ãƒªãƒƒãƒˆãƒ»CSVã¨ã®æ¯”è¼ƒ",
    "text": "Parquetã®ãƒ¡ãƒªãƒƒãƒˆãƒ»CSVã¨ã®æ¯”è¼ƒ\nã“ã“ã‹ã‚‰ã¯ï¼Œä¿å­˜ã—ãŸwho_longer ã®CSVãƒ»Parquetãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¯”è¼ƒã—ã¦ï¼ŒCSVã«å¯¾ã™ã‚‹Parquetã®ãƒ¡ãƒªãƒƒãƒˆã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ï¼\n\nãƒ¡ãƒªãƒƒãƒˆ1ï¼šCSVã‚ˆã‚Šãƒ‡ãƒ¼ã‚¿å®¹é‡ãŒè»½ã„\ntidy dataã¯è¡Œæ•°ãŒå¤šããªã‚‹ãŸã‚ï¼ŒCSVã§ã®ä¿å­˜ã«é©ã—ã¦ãŠã‚‰ãšï¼ŒParquetã‚’ä½¿ã£ãŸã»ã†ãŒã‚ˆã„ã“ã¨ã‚’æ—¢ã«è¿°ã¹ã¾ã—ãŸï¼\nå®Ÿéš›ã«ï¼Œwho_longer ã®CSVãƒ»Parquetã®ãƒ‡ãƒ¼ã‚¿å®¹é‡ã¯ï¼Œãã‚Œãã‚Œï¼Œ14.1 MBã¨154 KBã¨ãªã‚Šï¼ŒParquetã¯CSVã®ç´„1 %ã®ãƒ‡ãƒ¼ã‚¿å®¹é‡ã—ã‹ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼\nã©ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã‚‚ã“ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿å®¹é‡ã®å‰Šæ¸›ãŒè¦‹è¾¼ã‚ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒï¼ŒParquetã¯åˆ—æŒ‡å‘ã§ãƒ‡ãƒ¼ã‚¿åœ§ç¸®ã‚’è¡Œã†ãŸã‚ï¼ŒRãªã©ã§ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹tidy dataã®ä¿å­˜ã«é©ã—ãŸãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã‚ã‚‹ã¨ã„ãˆã¾ã™ï¼\n\n# CSV\nfile_size(\"who_longer.csv\")\n\n14.1M\n\n# Parquet\nfile_size(\"who_longer.parquet\")\n\n156K\n\nunits::set_units(file_size(\"who_longer.parquet\") / file_size(\"who_longer.csv\")) |&gt; \n  units::set_units(`%`)\n\n1.080502 [%]\n\n\n\n\nãƒ¡ãƒªãƒƒãƒˆ2ï¼šCSVã‚ˆã‚Šèª­ã¿è¾¼ã¿ãŒç°¡å˜\nwrite_csv()ãƒ»write_parquet() ã§ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚ã‚‹ã®ã¨åŒæ§˜ã«ï¼Œread_csv()ãƒ»read_parquet() ã§CSVãƒ»Parquetãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ï¼\nCSVã¯ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã§ã‚ã‚‹ãŸã‚ï¼Œèª­ã¿è¾¼ã¿æ™‚ã«col_typesã§å„åˆ—ã®å‹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯è‡ªå‹•ã§å‹ã‚’æ¨æ¸¬ï¼‰ï¼\nä¸€æ–¹ï¼ŒParquetã¯ï¼Œæ›¸ãè¾¼ã¿æ™‚ã«å„åˆ—ã®å‹æƒ…å ±ã‚‚ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãŸã‚èª­ã¿è¾¼ã¿æ™‚ã«å‹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ï¼\n\n# CSVã®èª­ã¿è¾¼ã¿\nread_csv(\"who_longer.csv\",\n         col_types = cols(.default = \"c\",\n                          year = \"i\",\n                          count = \"i\"))\n\n# Parquetã®èª­ã¿è¾¼ã¿\nread_parquet(\"who_longer.parquet\")\n\n\n\nãƒ¡ãƒªãƒƒãƒˆ3ï¼šCSVã‚ˆã‚Šãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ãƒ»é›†è¨ˆã«é©ã—ã¦ã„ã‚‹\nCSVã¯ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«é©ã—ã¦ãŠã‚‰ãšï¼Œã“ã‚Œã¾ã§ã¯ï¼Œãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«ã¯SQLã‚’ç”¨ã„ã‚‹ãªã©ã®ä½¿ã„åˆ†ã‘ãŒå¿…è¦ã§ã—ãŸï¼\nRã§ã¯ï¼Œdplyrï¼ˆdbplyrï¼‰ãƒ»DBIãªã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ç°¡å˜ã«SQLãŒä½¿ãˆã¾ã™ãŒï¼Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ¥ç¶šãƒ»åˆ‡æ–­ãªã©ãŒå¿…è¦ãªSQLã¯ï¼ŒCSVã¨ä½¿ã„å‹æ‰‹ãŒç•°ãªã‚Šï¼Œåˆå­¦è€…ã«ã¨ã£ã¦ã¯ãƒãƒ¼ãƒ‰ãƒ«ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼\nã¾ãŸï¼Œï¼ˆã»ã¨ã‚“ã©ã®ï¼Ÿï¼‰SQLã¯è¡ŒæŒ‡å‘ã§ã‚ã‚‹ãŸã‚ï¼Œãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãªã©ã«é©ã—ã¦ã„ã¾ã™ãŒï¼Œãƒ‡ãƒ¼ã‚¿åˆ†æã«ç”¨ã„ã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»é›†è¨ˆã«ã¯åˆ—æŒ‡å‘ã§ã‚ã‚‹Parquetã®ã»ã†ãŒé©ã—ã¦ã„ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ï¼\nCSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨ã„ã¦ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã‚’é›†è¨ˆã™ã‚‹å ´åˆã«ã¯ï¼Œä¸€åº¦ï¼Œå…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ¡ãƒ¢ãƒªã«ç§»ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ãã®ãŸã‚ï¼Œãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã§ãƒ¡ãƒ¢ãƒªãŒé€¼è¿«ã™ã‚‹ãŠãã‚ŒãŒã‚ã‚Šã¾ã™ï¼\nParquetã§ã¯ï¼Œèª­ã¿è¾¼ã¿æ™‚ã«as_data_frame = FALSEã¨ã™ã‚‹ã“ã¨ã§ï¼ŒSQLã¨åŒæ§˜ã«ãƒ¡ãƒ¢ãƒªã«ãƒ‡ãƒ¼ã‚¿ã‚’ç§»ã™ã“ã¨ãªããƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»é›†è¨ˆãªã©ãŒå¯èƒ½ã§ã™ï¼\nã“ã“ã§ã¯ï¼Œæ—¥æœ¬ã®å¹´ãƒ»ç—‡ä¾‹åˆ¥ã®æ‚£è€…æ•°ã‚’è¨ˆç®—ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼dplyrã®filter() ãƒ»group_by() ãƒ»summarise() ãªã©ã‚’ä½¿ã£ã¦åŠ¹ç‡çš„ã«ã‚¯ã‚¨ãƒªã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼æœ€å¾Œã«collect() ã‚’è¡Œãˆã°ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\nread_parquet(\"who_longer.parquet\",\n             as_data_frame = FALSE) |&gt; \n  filter(country == \"Japan\",\n         !is.na(count)) |&gt; \n  group_by(country, year, diagnosis) |&gt; \n  summarise(count = sum(count),\n            .groups = \"drop\") |&gt; \n  collect()\n\n# A tibble: 33 Ã— 4\n   country  year diagnosis count\n   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;\n 1 Japan    1995 sp        14367\n 2 Japan    1996 sp        12867\n 3 Japan    1997 sp        13571\n 4 Japan    1998 sp        11935\n 5 Japan    2001 sp        11408\n 6 Japan    2002 sp        10807\n 7 Japan    2003 sp        10843\n 8 Japan    2004 sp        10471\n 9 Japan    1999 sp        12909\n10 Japan    2000 sp        11853\n# â„¹ 23 more rows\n\n\n\n\nãƒ¡ãƒªãƒƒãƒˆ4ï¼šè¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ‰±ãˆã‚‹\nParquetã¯åˆ—æŒ‡å‘ã§ã‚ã‚‹ãŸã‚ï¼Œè¡ŒæŒ‡å‘ã§ã‚ã‚‹SQLã¨é•ã„ï¼Œãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãªã©ã«é©ã—ã¦ã„ã¾ã›ã‚“ï¼ã—ã‹ã—ï¼ŒParquetã§ã¯ï¼Œè¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®èª­ã¿è¾¼ã¿ãŒç°¡å˜ã«è¡Œãˆã‚‹ãŸã‚ï¼Œã“ã®ã‚ˆã†ãªãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’ç°¡å˜ã«è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\nã“ã“ã§ã¯ï¼Œwho_longerã‚’å¹´é½¢éšç´šåˆ¥ã«åˆ†å‰²ã—ãŸParquetãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ ¼ç´ã—ãŸ\"who_longer_byage\" ãƒ•ã‚©ãƒ«ãƒ€ã‚’ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ç”¨ã„ã¾ã—ã‚‡ã†ï¼\nopen_dataset(\"who_longer_byage\") ã¨ã™ã‚‹ã“ã¨ã§ï¼Œè¤‡æ•°ã®Parquetãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšï¼Œã•ãã»ã©ã¨åŒæ§˜ã®ãƒ‡ãƒ¼ã‚¿é›†è¨ˆã‚’ç°¡å˜ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼\n\n\nã‚³ãƒ¼ãƒ‰\ndir_create(\"who_longer_byage\")\nwho_longer |&gt; \n  group_by(age) |&gt; \n  group_walk(~ .x |&gt; \n               write_parquet(str_glue(\"who_longer_byage/who_longer_{.y$age}.parquet\")),\n  .keep = TRUE)\n\n\n\nopen_dataset(\"who_longer_byage\") |&gt; \n  filter(country == \"Japan\",\n         !is.na(count)) |&gt; \n  group_by(country, year, diagnosis) |&gt; \n  summarise(count = sum(count),\n            .groups = \"drop\") |&gt; \n  collect()\n\n# A tibble: 33 Ã— 4\n   country  year diagnosis count\n   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;\n 1 Japan    1995 sp        14367\n 2 Japan    1996 sp        12867\n 3 Japan    1997 sp        13571\n 4 Japan    1998 sp        11935\n 5 Japan    2001 sp        11408\n 6 Japan    2002 sp        10807\n 7 Japan    2003 sp        10843\n 8 Japan    2004 sp        10471\n 9 Japan    2005 sp        10931\n10 Japan    2006 sp        10159\n# â„¹ 23 more rows\n\n\n\n\nãƒ¡ãƒªãƒƒãƒˆ5ï¼šRãƒ»Pythoné–“ã§ã®ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã«é©ã—ã¦ã„ã‚‹\nPythonã®pandasãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯Parquetã®èª­ã¿æ›¸ãã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ï¼ŒParquetã¯ï¼ŒRãƒ»Pythoné–“ã§ã®ãƒ‡ãƒ¼ã‚¿ã®ã‚„ã‚Šå–ã‚Šã«ã‚‚é©ã—ã¦ã„ã¾ã™ï¼\nRã§ä½œæˆã—ãŸ'who_longer.parquet' ã‚’pandasã§èª­ã¿è¾¼ã‚“ã§ã¿ã¾ã—ã‚‡ã†ï¼\n\nimport pandas as pd\n\npd.read_parquet('who_longer.parquet')\n\n            country iso2 iso3    year diagnosis gender   age   count\n0       Afghanistan   AF  AFG  1980.0        sp      m   014     NaN\n1       Afghanistan   AF  AFG  1980.0        sp      m  1524     NaN\n2       Afghanistan   AF  AFG  1980.0        sp      m  2534     NaN\n3       Afghanistan   AF  AFG  1980.0        sp      m  3544     NaN\n4       Afghanistan   AF  AFG  1980.0        sp      m  4554     NaN\n...             ...  ...  ...     ...       ...    ...   ...     ...\n405435     Zimbabwe   ZW  ZWE  2013.0       rel      f  2534  4649.0\n405436     Zimbabwe   ZW  ZWE  2013.0       rel      f  3544  3526.0\n405437     Zimbabwe   ZW  ZWE  2013.0       rel      f  4554  1453.0\n405438     Zimbabwe   ZW  ZWE  2013.0       rel      f  5564   811.0\n405439     Zimbabwe   ZW  ZWE  2013.0       rel      f    65   725.0\n\n[405440 rows x 8 columns]"
  },
  {
    "objectID": "posts/2022/06/use-parquet-instead-of-csv-ja.html#ã¾ã¨ã‚",
    "href": "posts/2022/06/use-parquet-instead-of-csv-ja.html#ã¾ã¨ã‚",
    "title": "CSVã®ä»£ã‚ã‚Šã«Parquetã‚’ä½¿ã£ã¦ã¿ã‚ˆã†",
    "section": "ã¾ã¨ã‚",
    "text": "ã¾ã¨ã‚\nã“ã“ã¾ã§ï¼ŒRãƒ»Pythonã§åˆ©ç”¨å¯èƒ½ãªParquetã®ãƒ¡ãƒªãƒƒãƒˆã‚’ç´¹ä»‹ã—ã¾ã—ãŸï¼Parquetã¯ï¼Œè¿‘å¹´ï¼Œãƒ‡ãƒ¼ã‚¿åˆ†æã§æ™®åŠã—ã¦ã„ã‚‹tidy dataã®ä¿å­˜ãƒ»é›†è¨ˆã«é©ã—ã¦ã„ã¾ã™ï¼\nã¾ãŸï¼Œæœ€è¿‘ã§ã¯ï¼Œåœ°ç†ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ãˆã‚‹sfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ‡ãƒ¼ã‚¿ã‚’parquetã¨ã—ã¦ä¿å­˜ã§ãã‚‹sfarrowãªã©ã‚‚ç™»å ´ã—ã¦ã„ã¾ã™ï¼\nCSVã®ä»£ã‚ã‚Šã«Parquetã‚’ç”¨ã„ã‚‹ã“ã¨ã§ãƒ‡ãƒ¼ã‚¿åˆ†æãŒã•ã‚‰ã«ç°¡å˜ã«ãªã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ï¼"
  },
  {
    "objectID": "posts/2022/05/ioanalysis-in-r-ja.html",
    "href": "posts/2022/05/ioanalysis-in-r-ja.html",
    "title": "Rã§ç”£æ¥­é€£é–¢åˆ†æ",
    "section": "",
    "text": "ç”£æ¥­é€£é–¢åˆ†æã¯ï¼ŒçµŒæ¸ˆæ³¢åŠåŠ¹æœã®ç®—å‡ºã«åºƒãç”¨ã„ã‚‰ã‚Œã¦ã„ã‚‹åˆ†ææ‰‹æ³•ã§ã™ï¼ æ—¥æœ¬ã§ã¯ï¼Œå›½ã‚„éƒ½é“åºœçœŒã«ã‚ˆã£ã¦ï¼Œç´„5å¹´ã«1åº¦ï¼Œç”£æ¥­é€£é–¢è¡¨ã¨å‘¼ã°ã‚Œã‚‹çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ãŒ ä½œæˆãƒ»å…¬é–‹ã•ã‚Œã¦ãŠã‚Šï¼Œç”£æ¥­é€£é–¢åˆ†æã«ãŠã‘ã‚‹åŸºç¤ãƒ‡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ï¼\nã“ã‚Œã¾ã§ï¼Œç”£æ¥­é€£é–¢åˆ†æã§ã¯ï¼ŒExcelãƒ»VBAãŒç”¨ã„ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã‹ã£ãŸã‚ˆã†ã§ã™ï¼\nä¸€æ–¹ã§ï¼Œè¿‘å¹´ã¯ï¼ŒPythonãƒ»Rãƒ»Juliaãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®æ™®åŠãŒé€²ã‚“ã§ã„ã¾ã™ï¼ ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¯ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹é•·ã‚’æŒã£ã¦ã„ã¾ã™ï¼\nãã®ãŸã‚ä»Šå¾Œã¯ï¼Œç”£æ¥­é€£é–¢åˆ†æã«ãŠã„ã¦ã‚‚ï¼Œã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®åˆ©ç”¨ãŒ é€²ã‚€ã®ã§ã¯ãªã„ã‹ã¨æ€ã‚ã‚Œã¾ã™ï¼\nã“ã“ã§ã¯ï¼ŒRã‚’ç”¨ã„ã¦ç”£æ¥­é€£é–¢åˆ†æã‚’è¡Œã„ã¾ã™ï¼ Rã§ã¯è¿‘å¹´ï¼Œtidyverseãªã©ãƒ¢ãƒ€ãƒ³ãªãƒ‡ãƒ¼ã‚¿åˆ†æã‚’è¡Œã†ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒ å¤šãæä¾›ã•ã‚Œã¦ãŠã‚Šï¼Œãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…ã§ã‚‚ç¿’å¾—ã—ã‚„ã™ã„è¨€èªã§ã‚ã‚‹ã¨æ€ã„ã¾ã™ï¼\nç”£æ¥­é€£é–¢è¡¨ã¨ã—ã¦ï¼Œe-Statã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹æ—¥æœ¬ï¼ˆå›½ï¼‰ã® 2013å¹´ãƒ»13éƒ¨é–€ç”£æ¥­é€£é–¢è¡¨ã‚’ç”¨ã„ã¾ã™ï¼ ã“ã“ã§ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ï¼Œ ã“ã¡ã‚‰ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ï¼"
  },
  {
    "objectID": "posts/2022/05/ioanalysis-in-r-ja.html#ç”£æ¥­é€£é–¢åˆ†æã®åŸºç¤",
    "href": "posts/2022/05/ioanalysis-in-r-ja.html#ç”£æ¥­é€£é–¢åˆ†æã®åŸºç¤",
    "title": "Rã§ç”£æ¥­é€£é–¢åˆ†æ",
    "section": "ç”£æ¥­é€£é–¢åˆ†æã®åŸºç¤",
    "text": "ç”£æ¥­é€£é–¢åˆ†æã®åŸºç¤\nç”£æ¥­é€£é–¢åˆ†æã¯ä¸€èˆ¬çš„ã«ä»¥ä¸‹ã®æµã‚Œã«å¾“ã£ã¦è¡Œã‚ã‚Œã¾ã™ï¼\n\nç”£æ¥­é€£é–¢è¡¨ã®æ•´å½¢\næŠ•å…¥ä¿‚æ•°è¡Œåˆ—ã®ç®—å‡º\nãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—ã®ç®—å‡º\nçµŒæ¸ˆæ³¢åŠåŠ¹æœã®ç®—å‡º\n\nã¾ãšï¼Œç”£æ¥­é€£é–¢åˆ†æã«ãŠã„ã¦é‡è¦ãªæŠ•å…¥ä¿‚æ•°è¡Œåˆ—ãƒ»ãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—ãƒ»çµŒæ¸ˆæ³¢åŠåŠ¹æœã®ç®—å‡ºæ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ï¼\n\næŠ•å…¥ä¿‚æ•°è¡Œåˆ—ã¨ã¯\næŠ•å…¥ä¿‚æ•°ã¯ï¼Œç”£æ¥­ã®ã€Œã‚¯ãƒƒã‚­ãƒ³ã‚°ãƒ¬ã‚·ãƒ”ã€ã¨ã—ã¦å‘¼ã°ã‚Œã¦ãŠã‚Šï¼Œç”£æ¥­\\(j\\)ã®ç”Ÿç”£ç‰©ã‚’1å˜ä½ç”Ÿç”£ã™ã‚‹ã®ã«å¿…è¦ãªç”£æ¥­\\(i\\)ã®ç”Ÿç”£ç‰©ã®é‡ã‚’è¡¨ã™ã‚‚ã®ã§ã™ï¼å…·ä½“çš„ã«ã¯ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ä¸­é–“æŠ•å…¥\\(x_{ij}\\)ã‚’ç”Ÿç”£é¡\\(X_j\\)ï¼ˆç”£å‡ºé¡ï¼‰ã§å‰²ã‚‹ã“ã¨ã§ç®—å‡ºã§ãã¾ã™ï¼\n\\[\na_{ij}=\\frac{x_{ij}}{X_j}\n\\]\nç”£æ¥­é€£é–¢åˆ†æã§ã¯ï¼Œã€Œã‚¯ãƒƒã‚­ãƒ³ã‚°ãƒ¬ã‚·ãƒ”ã€ã«ç›¸å½“ã™ã‚‹æŠ•å…¥ä¿‚æ•°\\(a_{ij}\\)ã«åŸºã¥ãç”Ÿç”£é¡ã®ãƒãƒ©ãƒ³ã‚¹å¼ï¼ˆè¡Œæ–¹å‘ï¼‰ã‚’é€£ç«‹æ–¹ç¨‹å¼ã¨ã—ã¦è§£ãã¾ã™ï¼ãã“ã§ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ï¼ŒæŠ•å…¥ä¿‚æ•°è¡Œåˆ—ï¼ˆé€šå¸¸ï¼Œ\\(A\\)ã¨è¡¨ã•ã‚Œã‚‹ï¼‰ã¨å‘¼ã°ã‚Œã‚‹è¡Œåˆ—ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ï¼Œé€£ç«‹æ–¹ç¨‹å¼ãŒç°¡å˜ã«è§£ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼\n\\[\nA = \\begin{pmatrix}\n  a_{11} & \\cdots & a_{1n} \\\\\n  \\vdots & \\ddots & \\vdots \\\\\n  a_{n1} & \\cdots & a_{nn} \\\\\n\\end{pmatrix}\n\\]\n\n\nãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—ã«ã‚ˆã‚‹çµŒæ¸ˆæ³¢åŠåŠ¹æœã®æ¨è¨ˆã«ã¤ã„ã¦\nç”Ÿç”£é¡ã®ãƒãƒ©ãƒ³ã‚¹å¼ï¼ˆè¡Œæ–¹å‘ï¼‰ã¯ï¼Œè¡Œåˆ—ã‚’ç”¨ã„ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ã›ã¾ã™ï¼å¤‰æ•°ã®æ„å‘³ã¯ä»¥ä¸‹ã®è¡¨ã®é€šã‚Šã§ã™ï¼\n\\[\nAX + F + E - M = X\n\\]\n\n\n\nå¤‰æ•°\næ„å‘³\n\n\n\n\n\\(A\\)\næŠ•å…¥ä¿‚æ•°è¡Œåˆ—\n\n\n\\(X = (X_1, \\cdots, X_n) ^ \\top\\)\nç”Ÿç”£é¡ãƒ™ã‚¯ãƒˆãƒ«\n\n\n\\(F = (F_1, \\cdots, F_n) ^ \\top\\)\næœ€çµ‚éœ€è¦ãƒ™ã‚¯ãƒˆãƒ«\n\n\n\\(E = (E_1, \\cdots, E_n) ^ \\top\\)\nç§»è¼¸å‡ºãƒ™ã‚¯ãƒˆãƒ«\n\n\n\\(M = (M_1, \\cdots, M_n) ^ \\top\\)\nç§»è¼¸å…¥ãƒ™ã‚¯ãƒˆãƒ«\n\n\n\nçµŒæ¸ˆæ³¢åŠåŠ¹æœã®æ¨è¨ˆã§ã¯ï¼Œæœ€çµ‚éœ€è¦ã®å¤‰åŒ–ãŒç”Ÿç”£é¡ã«ä¸ãˆã‚‹æ³¢åŠåŠ¹æœã‚’ç®—å‡ºã—ã¾ã™ï¼\nç‰¹ã«ï¼Œæ—¥æœ¬ã®ç”£æ¥­é€£é–¢è¡¨ã§ã®çµŒæ¸ˆæ³¢åŠåŠ¹æœã®æ¨è¨ˆã§ã¯ï¼Œç§»è¼¸å…¥\\(M\\)ã®æ‰±ã„ã«æ³¨æ„ãŒå¿…è¦ã§ã™ï¼ˆã“ã‚Œã¯ï¼Œæ—¥æœ¬è¡¨ã®å¤šããŒç«¶äº‰ç§»è¼¸å…¥å‹è¡¨ã¨å‘¼ã°ã‚Œã‚‹å½¢å¼ã‚’æ¡ç”¨ã—ã¦ãŠã‚Šï¼ŒæŠ•å…¥ä¿‚æ•°ã«ç§»è¼¸å…¥åˆ†ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã™ï¼‰ï¼\næœ€çµ‚éœ€è¦ã«ã‚ˆã‚‹çµŒæ¸ˆæ³¢åŠåŠ¹æœã¯ï¼ŒåŸŸå†…ã®ç”Ÿç”£é¡ã ã‘ã§ãªãåŸŸå¤–ã‹ã‚‰ã®ç§»è¼¸å…¥ã‚’èª˜ç™ºã™ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ï¼ã“ã®åŠ¹æœã‚’ç„¡è¦–ã™ã‚‹ã¨çµŒæ¸ˆæ³¢åŠåŠ¹æœã‚’éå¤§è©•ä¾¡ã™ã‚‹ã“ã¨ã«ã¤ãªãŒã‚‹ãŸã‚ï¼Œé€šå¸¸ï¼ŒæŠ•å…¥ä¿‚æ•°ã‹ã‚‰ç§»è¼¸å…¥ç›¸å½“åˆ†ã‚’å·®ã—å¼•ãã¨ã„ã†å‡¦ç†ãŒè¡Œã‚ã‚Œã¾ã™ï¼\nç§»è¼¸å…¥ã¯åŸŸå†…éœ€è¦ã«ãŠãŠã‚ˆãæ¯”ä¾‹ã™ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œç§»è¼¸å…¥ä¿‚æ•°\\(\\hat{M_i}\\)ãŒç®—å‡ºã§ãã¾ã™ï¼\n\\[\n\\hat{M_i} = \\frac{M_i}{\\sum_{j}a_{ij}X_j + F_i}\n\\]\nã•ã‚‰ã«ï¼Œè¡Œåˆ—ã§ã®è¨ˆç®—ã«é©ã—ãŸç§»è¼¸å…¥ä¿‚æ•°è¡Œåˆ—\\(\\hat{M}\\)ãŒï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¾ã™ï¼\n\\[\n\\hat{M} =\n\\begin{pmatrix}\n  \\hat{M_1} & & 0 \\\\\n  & \\ddots & \\\\\n  0 & & \\hat{M_n} \\\\\n\\end{pmatrix}\n\\]\nä»¥ä¸Šã‚ˆã‚Šï¼Œç”Ÿç”£é¡ã®ãƒãƒ©ãƒ³ã‚¹å¼ï¼ˆè¡Œæ–¹å‘ï¼‰ã¯ï¼Œç§»è¼¸å…¥ä¿‚æ•°è¡Œåˆ—\\(\\hat{M}\\)ã‚’ç”¨ã„ã¦ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰å½¢ã•ã‚Œã¾ã™ï¼ãŸã ã—ï¼Œ\\(I\\)ã¯å˜ä½è¡Œåˆ—ï¼ˆå¯¾è§’æˆåˆ†ãŒ1ï¼Œãã‚Œä»¥å¤–ãŒ0ã®æ­£æ–¹è¡Œåˆ—ï¼‰ã§ã™ï¼\n\\[\n\\begin{align}\n  AX + F + E - \\hat{M} (AX + F) &= X \\\\\n  (I - \\hat{M}) (AX + F) + E &= X\n\\end{align}\n\\]\nä¸Šã®ãƒãƒ©ãƒ³ã‚¹å¼ã‚ˆã‚Šï¼ŒçµŒæ¸ˆæ³¢åŠåŠ¹æœã®ç®—å‡ºå¼ãŒï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«å°å‡ºã•ã‚Œã¾ã™ï¼ã“ã“ã§ï¼Œ\\(\\Delta X\\)ï¼Œ\\(\\Delta F\\)ã¯ï¼Œãã‚Œãã‚Œï¼Œç”Ÿç”£é¡ã®å¤‰åŒ–é‡ï¼Œæœ€çµ‚éœ€è¦ã®å¤‰åŒ–é‡ã§ã™ï¼\n\\[\n\\begin{align}\n  X &= (I - \\hat{M}) (AX + F) + E \\\\\n  [I - (I - \\hat{M}) A] X &= (I - \\hat{M}) F + E \\\\\n  X &= [I - (I - \\hat{M}) A] ^ {-1} [(I - \\hat{M}) F + E] \\\\\n  \\Delta X &= [I - (I - \\hat{M}) A] ^ {-1} (I - \\hat{M}) \\Delta F\n\\end{align}\n\\]\nç”Ÿç”£é¡ã®å¤‰åŒ–é‡\\(\\Delta X\\)ã®å¼ã®å³è¾ºã®\\((I - \\hat{M}) \\Delta F\\)ã¯ï¼Œæœ€çµ‚éœ€è¦ã®å¤‰åŒ–é‡ã«è‡ªçµ¦ç‡\\(I - \\hat{M}\\)ã‚’æ›ã‘ãŸå€¤ã¨ãªã£ã¦ã„ã¾ã™ï¼\nã¾ãŸï¼Œ\\([I - (I - \\hat{M}) A] ^ {-1}\\)ã¯ï¼Œæœ€çµ‚éœ€è¦ã®å¤‰åŒ–ã«ã‚ˆã‚‹ç›´æ¥ãƒ»é–“æ¥ã®æ³¢åŠåŠ¹æœã‚’è¡¨ã™è¡Œåˆ—ã§ã‚ã‚Šï¼ˆé–‹æ”¾å‹ã¾ãŸã¯ç«¶äº‰ç§»è¼¸å…¥å‹ã®ï¼‰ãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—ã¨å‘¼ã°ã‚Œã¦ã„ã¾ã™ï¼\nä»¥ä¸Šã®ã‚ˆã†ã«ï¼Œæœ€çµ‚éœ€è¦ã®å¤‰åŒ–é‡\\(\\Delta F\\)ã‹ã‚‰ç”Ÿç”£é¡ã®å¤‰åŒ–é‡\\(\\Delta X\\)ã‚’æ¨è¨ˆã™ã‚‹ã¨ã„ã†ã®ãŒï¼Œæœ€ã‚‚ä¸€èˆ¬çš„ãªç”£æ¥­é€£é–¢åˆ†æã®æ–¹æ³•ã¨ãªã£ã¦ã„ã¾ã™ï¼"
  },
  {
    "objectID": "posts/2022/05/ioanalysis-in-r-ja.html#rã«ã‚ˆã‚‹ç”£æ¥­é€£é–¢åˆ†æ",
    "href": "posts/2022/05/ioanalysis-in-r-ja.html#rã«ã‚ˆã‚‹ç”£æ¥­é€£é–¢åˆ†æ",
    "title": "Rã§ç”£æ¥­é€£é–¢åˆ†æ",
    "section": "Rã«ã‚ˆã‚‹ç”£æ¥­é€£é–¢åˆ†æ",
    "text": "Rã«ã‚ˆã‚‹ç”£æ¥­é€£é–¢åˆ†æ\n\nç”£æ¥­é€£é–¢è¡¨ã®æ•´å½¢\nã“ã“ã§ã¯ï¼Œ ã“ã¡ã‚‰ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹æ—¥æœ¬ã®2011å¹´ã®3éƒ¨é–€è¡¨ï¼ˆiotable_3sector_2011_wider.csvï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ï¼\nã“ã¡ã‚‰ã®è¡¨ã¯ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œæ—¥æœ¬ã®2011å¹´ã®13éƒ¨é–€è¡¨ã‚ˆã‚Šä½œæˆã—ãŸã‚‚ã®ã§ï¼Œå˜ä½ã¯ã€Œç™¾ä¸‡å††ã€ã§ã™ï¼\n\n13éƒ¨é–€ã®ç”£æ¥­åˆ†é¡ã‚’ç¬¬1æ¬¡ãƒ»ç¬¬2æ¬¡ãƒ»ç¬¬3æ¬¡ç”£æ¥­ã«é›†è¨ˆï¼ˆæ³¨ï¼šã€Œåˆ†é¡ä¸æ˜ã€ã‚’ç¬¬3æ¬¡ç”£æ¥­ã«åˆ†é¡ï¼‰\nä»˜åŠ ä¾¡å€¤éƒ¨é–€ã‚’1éƒ¨é–€ã«é›†è¨ˆ\næœ€çµ‚éœ€è¦éƒ¨é–€ã‚’åŸŸå†…æœ€çµ‚éœ€è¦ï¼ˆfinaldemandï¼‰ãƒ»è¼¸å‡ºï¼ˆexportï¼‰ãƒ»è¼¸å…¥ï¼ˆimportï¼‰ã®3éƒ¨é–€ã«é›†è¨ˆ\n\nç”£æ¥­é€£é–¢è¡¨ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã¯ï¼Œe-Statã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§æä¾›ã•ã‚Œã¦ã„ã‚‹è¡¨ãªã©ã‚’é™¤ã„ã¦ï¼Œ è¡Œã«æŠ•å…¥éƒ¨é–€ï¼ˆinputï¼‰ãƒ»åˆ—ã«ç”£å‡ºéƒ¨é–€ï¼ˆoutputï¼‰ã‚’æŒã¤ã€Œæ¨ªé•·ãƒ‡ãƒ¼ã‚¿ã€ã§ã‚ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã‚ã‚Œã¾ã™ï¼\nã“ã“ã§ã‚‚ï¼Œä»¥ä¸‹ã®é€šã‚Šï¼Œã¾ãšã¯æ¨ªé•·ã®ç”£æ¥­é€£é–¢è¡¨ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ï¼\n\nlibrary(tidyverse)\n\nWarning: package 'ggplot2' was built under R version 4.2.3\n\n\nWarning: package 'tibble' was built under R version 4.2.3\n\n\nWarning: package 'dplyr' was built under R version 4.2.3\n\niotable_wider &lt;- read_csv(\"iotable_3sector_2011_wider.csv\",\n                          col_types = cols(.default = \"c\")) |&gt; \n  \n  # input (æŠ•å…¥) åˆ—ä»¥å¤–ã‚’æ•°å€¤ã«å¤‰æ›\n  mutate(across(!input, parse_number))\n\nknitr::kable(iotable_wider)\n\n\n\n\n\n\n\n\n\n\n\n\n\ninput\nindustry/01_primary\nindustry/02_secondary\nindustry/03_tertiary\nfinaldemand/04_finaldemand\nexport/05_export\nimport/06_import\n\n\n\n\nindustry/01_primary\n1456611\n7850628\n1373767\n3869875\n47890\n-2562809\n\n\nindustry/02_secondary\n2715710\n161897553\n62841827\n132924323\n54473273\n-71673715\n\n\nindustry/03_tertiary\n2025270\n66811645\n155796589\n352324555\n16423417\n-8921553\n\n\nvalueadded/04_valueadded\n5838371\n106619145\n364447740\nNA\nNA\nNA\n\n\n\n\n\nãƒ‡ãƒ¼ã‚¿åˆ†æã«ãŠã„ã¦ã¯ï¼Œã€Œæ¨ªé•·ãƒ‡ãƒ¼ã‚¿ã€ã‚ˆã‚Šã‚‚ï¼Œä»¥ä¸‹ã®ã‚ˆã†ãªã€Œç¸¦é•·ãƒ‡ãƒ¼ã‚¿ã€ã®ã»ã†ãŒï¼Œ åˆ†æã—ã‚„ã™ã„å ´åˆãŒå¤šãã‚ã‚Šã¾ã™ï¼ ã“ã“ã§ã‚‚ï¼Œæ¨ªé•·ã®ç”£æ¥­é€£é–¢è¡¨ã‚’ã€Œç¸¦é•·ãƒ‡ãƒ¼ã‚¿ã€ã«å¤‰æ›ã—ã¾ã™ï¼\n\niotable &lt;- iotable_wider |&gt;\n  \n  # input (æŠ•å…¥) åˆ—ã‚’åˆ†é¡ãƒ»åç§°ã«åˆ†å‰²\n  separate(input, c(\"input_type\", \"input_name\"),\n           sep = \"/\") |&gt;\n  \n  # input (æŠ•å…¥) ã¨åŒæ§˜ã«output (ç”£å‡º) ã®åˆ†é¡ãƒ»åç§°åˆ—ã‚’è¿½åŠ ã—ç¸¦é•·ãƒ‡ãƒ¼ã‚¿ã«\n  pivot_longer(!c(input_type, input_name),\n               names_to = c(\"output_type\", \"output_name\"),\n               names_sep = \"/\",\n               values_to = \"value_M\") |&gt;\n  \n  # æ•°å€¤ãŒå­˜åœ¨ã—ãªã„è¡Œã‚’å‰Šé™¤\n  drop_na(value_M)\n\nknitr::kable(iotable)\n\n\n\n\ninput_type\ninput_name\noutput_type\noutput_name\nvalue_M\n\n\n\n\nindustry\n01_primary\nindustry\n01_primary\n1456611\n\n\nindustry\n01_primary\nindustry\n02_secondary\n7850628\n\n\nindustry\n01_primary\nindustry\n03_tertiary\n1373767\n\n\nindustry\n01_primary\nfinaldemand\n04_finaldemand\n3869875\n\n\nindustry\n01_primary\nexport\n05_export\n47890\n\n\nindustry\n01_primary\nimport\n06_import\n-2562809\n\n\nindustry\n02_secondary\nindustry\n01_primary\n2715710\n\n\nindustry\n02_secondary\nindustry\n02_secondary\n161897553\n\n\nindustry\n02_secondary\nindustry\n03_tertiary\n62841827\n\n\nindustry\n02_secondary\nfinaldemand\n04_finaldemand\n132924323\n\n\nindustry\n02_secondary\nexport\n05_export\n54473273\n\n\nindustry\n02_secondary\nimport\n06_import\n-71673715\n\n\nindustry\n03_tertiary\nindustry\n01_primary\n2025270\n\n\nindustry\n03_tertiary\nindustry\n02_secondary\n66811645\n\n\nindustry\n03_tertiary\nindustry\n03_tertiary\n155796589\n\n\nindustry\n03_tertiary\nfinaldemand\n04_finaldemand\n352324555\n\n\nindustry\n03_tertiary\nexport\n05_export\n16423417\n\n\nindustry\n03_tertiary\nimport\n06_import\n-8921553\n\n\nvalueadded\n04_valueadded\nindustry\n01_primary\n5838371\n\n\nvalueadded\n04_valueadded\nindustry\n02_secondary\n106619145\n\n\nvalueadded\n04_valueadded\nindustry\n03_tertiary\n364447740\n\n\n\n\n\nä¸Šã§æ§‹ç¯‰ã—ãŸè¡¨ãƒ‡ãƒ¼ã‚¿ã¯ï¼Œå„è¡Œã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãªã©ãŒå®¹æ˜“ã«ã§ãã‚‹ä¸€æ–¹ã§ï¼Œ ç”£æ¥­é€£é–¢åˆ†æã«ç”¨ã„ã‚‰ã‚Œã‚‹è¡Œåˆ—è¨ˆç®—ãªã©ã«é©ã—ã¦ã„ã¾ã›ã‚“ï¼\nãã“ã§ï¼Œè¡¨ãƒ‡ãƒ¼ã‚¿ã®åŸºæœ¬çš„ãªæ¼”ç®—ã¨è¡Œåˆ—è¨ˆç®—ã‚’åŒæ™‚ã«è¡Œãˆã‚‹dibbleãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã¾ã™ï¼ ä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œç”£æ¥­é€£é–¢è¡¨ã‚’dibbleã«å¤‰æ›ã—ã¾ã™ï¼\n\n# pak::pak(\"UchidaMizuki/dibble\")\nlibrary(dibble)\n\niotable &lt;- iotable |&gt;\n  dibble_by(input = c(input_type, input_name),\n            output = c(output_type, output_name),\n            \n            # \"_\"ã§åˆ—åã‚’åˆ†å‰²ã—ã¦input (æŠ•å…¥)ãƒ»output (ç”£å‡º) è»¸ã‚’è¨­å®š\n            .names_sep = \"_\")\n\niotable\n\n# A dibble:   24 x 1\n# Dimensions: input [4], output [6]\n# Measures:   value_M\n   input$type $name        output$type $name            value_M\n   &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;              &lt;dbl&gt;\n 1 industry   01_primary   industry    01_primary       1456611\n 2 industry   01_primary   industry    02_secondary     7850628\n 3 industry   01_primary   industry    03_tertiary      1373767\n 4 industry   01_primary   finaldemand 04_finaldemand   3869875\n 5 industry   01_primary   export      05_export          47890\n 6 industry   01_primary   import      06_import       -2562809\n 7 industry   02_secondary industry    01_primary       2715710\n 8 industry   02_secondary industry    02_secondary   161897553\n 9 industry   02_secondary industry    03_tertiary     62841827\n10 industry   02_secondary finaldemand 04_finaldemand 132924323\n# â„¹ 14 more rows\n\n\n\n\næŠ•å…¥ä¿‚æ•°è¡Œåˆ—ã®ç®—å‡º\nç”£æ¥­ã®ã€Œã‚¯ãƒƒã‚­ãƒ³ã‚°ãƒ¬ã‚·ãƒ”ã€ã¨å‘¼ã°ã‚Œã‚‹æŠ•å…¥ä¿‚æ•°è¡Œåˆ—\\(A\\)ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¸­é–“æŠ•å…¥ã‚’ç”Ÿç”£é¡ã§å‰²ã£ã¦ç®—å‡ºã—ã¾ã™ï¼\næ³¨ï¼šdibbleã§ã¯ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãŒè‡ªå‹•ã§è¡Œã‚ã‚Œã¾ã™ãŒï¼Œå®‰å…¨ã®ãŸã‚ï¼Œãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚’è¡Œã†éš›ã«ï¼Œè­¦å‘Šã‚’ç™ºã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ï¼ãã®ãŸã‚ï¼Œbroadcast()ã§ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆå¾Œã®è»¸åc(\"input\", \"output\")ã‚’ä¸ãˆã¦è­¦å‘ŠãŒå‡ºãªã„ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼\n\n# ç”Ÿç”£é¡\ntotal_input &lt;- iotable |&gt;\n  filter(output$type == \"industry\") |&gt;\n  apply(\"output\", sum)\n\n# ä¸­é–“æŠ•å…¥\ninterindustry &lt;- iotable |&gt;\n  filter(input$type == \"industry\",\n         output$type == \"industry\")\n\n# æŠ•å…¥ä¿‚æ•°\ninputcoeff &lt;- broadcast(interindustry / total_input,\n                        c(\"input\", \"output\"))\n\ninputcoeff\n\n# A dibble:   9\n# Dimensions: input [3], output [3]\n  input$type $name        output$type $name              .\n  &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;\n1 industry   01_primary   industry    01_primary   0.121  \n2 industry   01_primary   industry    02_secondary 0.0229 \n3 industry   01_primary   industry    03_tertiary  0.00235\n4 industry   02_secondary industry    01_primary   0.226  \n5 industry   02_secondary industry    02_secondary 0.472  \n6 industry   02_secondary industry    03_tertiary  0.108  \n7 industry   03_tertiary  industry    01_primary   0.168  \n8 industry   03_tertiary  industry    02_secondary 0.195  \n9 industry   03_tertiary  industry    03_tertiary  0.267  \n\n\n\n\nãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—ã®ç®—å‡º\nçµŒæ¸ˆæ³¢åŠåŠ¹æœã‚’è¡¨ã™ãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œç§»è¼¸å…¥ä¿‚æ•°ã¨æŠ•å…¥ä¿‚æ•°ã‚’ç”¨ã„ã¦ç®—å‡ºã§ãã¾ã™ï¼\næ³¨ï¼šsolve()ã§é€†è¡Œåˆ—ã‚’ç®—å‡ºã™ã‚‹ã¨è¡Œåˆ—ã®è»¸åãŒå…¥ã‚Œæ›¿ã‚ã‚‹ãŸã‚æ³¨æ„ã—ã¦ãã ã•ã„ï¼\n\n# åŸŸå†…éœ€è¦\nlocaldemand &lt;- iotable |&gt;\n  filter(input$type == \"industry\",\n         !output$type %in% c(\"export\", \"import\")) |&gt;\n  apply(\"input\", sum)\n\n# (ç§») è¼¸å…¥\nimport &lt;- iotable |&gt;\n  filter(input$type == \"industry\",\n         output$type == \"import\") |&gt;\n  apply(\"input\", sum)\n# ç¬¦å·ã‚’æ­£ã«\nimport &lt;- -import\n\n# (ç§») è¼¸å…¥ä¿‚æ•°\nimportcoeff &lt;- import / localdemand\n\nI &lt;- eye(inputcoeff) # å˜ä½è¡Œåˆ—\nM &lt;- importcoeff     # ç§»è¼¸å…¥ä¿‚æ•°ãƒ™ã‚¯ãƒˆãƒ« (broadcastãŒè¡Œã‚ã‚Œã‚‹ãŸã‚è¡Œåˆ—ã§ãªãã¦ã‚ˆã„)\nA &lt;- inputcoeff      # æŠ•å…¥ä¿‚æ•°è¡Œåˆ—\n\n# ãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—\nleontiefinv &lt;- broadcast(I - (1 - M) * A,\n                         c(\"input\", \"output\")) |&gt;\n  solve()\n\nleontiefinv\n\n# A dibble:   9\n# Dimensions: output [3], input [3]\n  output$type $name        input$type $name              .\n  &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;\n1 industry    01_primary   industry   01_primary   1.12   \n2 industry    01_primary   industry   02_secondary 0.0361 \n3 industry    01_primary   industry   03_tertiary  0.00716\n4 industry    02_secondary industry   01_primary   0.374  \n5 industry    02_secondary industry   02_secondary 1.68   \n6 industry    02_secondary industry   03_tertiary  0.197  \n7 industry    03_tertiary  industry   01_primary   0.348  \n8 industry    03_tertiary  industry   02_secondary 0.445  \n9 industry    03_tertiary  industry   03_tertiary  1.41   \n\n\n\n\nçµŒæ¸ˆæ³¢åŠåŠ¹æœã®ç®—å‡º\nã“ã¡ã‚‰ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹æœ€çµ‚éœ€è¦ãŒãã‚Œãã‚Œç™¾ä¸‡å††ãšã¤å¢—åŠ ã™ã‚‹ï¼ˆfinaldemand_change_3sector.csvï¼‰ã‚±ãƒ¼ã‚¹ã§çµŒæ¸ˆæ³¢åŠåŠ¹æœã‚’ç®—å‡ºã—ã¦ã„ã¾ã™ï¼\n\n# æœ€çµ‚éœ€è¦å¤‰åŒ–é‡\nfinaldemand_change &lt;- read_csv(\"finaldemand_change_3sector.csv\",\n                               col_types = cols(.default = \"c\",\n                                                value_M = \"n\")) |&gt; \n  dibble_by(input = c(input_type, input_name),\n            .names_sep = \"_\")\n\nL &lt;- leontiefinv         # ãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—\nM &lt;- importcoeff         # ç§»è¼¸å…¥ä¿‚æ•°\nFD &lt;- finaldemand_change # æœ€çµ‚éœ€è¦å¤‰åŒ–é‡\n\n# çµŒæ¸ˆæ³¢åŠåŠ¹æœ\nspillover &lt;- L %*% ((1 - M) * FD)\n\nspillover\n\n# A dibble:   3\n# Dimensions: output [3]\n  output$type $name            .\n  &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt;\n1 industry    01_primary   0.958\n2 industry    02_secondary 1.85 \n3 industry    03_tertiary  2.03 \n\n\n\ntheme_set(theme_light())\n\nspillover |&gt; \n  as_tibble(n = \"value_M\") |&gt; \n  unpack(output, \n         names_sep = \"_\") |&gt; \n  ggplot(aes(output_name, value_M,\n             fill = output_name)) +\n  geom_col(show.legend = FALSE) +\n  scale_fill_brewer(palette = \"Set2\")"
  },
  {
    "objectID": "posts/2022/05/ioanalysis-in-r-ja.html#ã¾ã¨ã‚",
    "href": "posts/2022/05/ioanalysis-in-r-ja.html#ã¾ã¨ã‚",
    "title": "Rã§ç”£æ¥­é€£é–¢åˆ†æ",
    "section": "ã¾ã¨ã‚",
    "text": "ã¾ã¨ã‚\nRã‚’ç”¨ã„ãŸç”£æ¥­é€£é–¢åˆ†æã®æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸï¼\nã“ã“ã¾ã§ã®è¨ˆç®—ã‚’ï¼Œjpioã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å½¢å¼ã§ã¾ã¨ã‚ã¾ã—ãŸï¼ä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œã“ã“ã¾ã§ã®è¨ˆç®—ã¨åŒæ§˜ã®è¨ˆç®—ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼\n\n# pak::pak(\"UchidaMizuki/jpio\")\n\n# ç”£æ¥­é€£é–¢è¡¨\niotable &lt;- read_csv(\"iotable_3sector_2011.csv\",\n                    col_types = cols(.default = \"c\",\n                                     value_M = \"n\")) |&gt; \n  jpio::as_iotable()\n\niotable\n\n# A dibble:   24\n# Dimensions: input [4], output [6]\n   input$type $name        output$type $name                  .\n   &lt;fct&gt;      &lt;chr&gt;        &lt;fct&gt;       &lt;chr&gt;              &lt;dbl&gt;\n 1 industry   01_primary   industry    01_primary       1456611\n 2 industry   01_primary   industry    02_secondary     7850628\n 3 industry   01_primary   industry    03_tertiary      1373767\n 4 industry   01_primary   finaldemand 04_finaldemand   3869875\n 5 industry   01_primary   export      05_export          47890\n 6 industry   01_primary   import      06_import       -2562809\n 7 industry   02_secondary industry    01_primary       2715710\n 8 industry   02_secondary industry    02_secondary   161897553\n 9 industry   02_secondary industry    03_tertiary     62841827\n10 industry   02_secondary finaldemand 04_finaldemand 132924323\n# â„¹ 14 more rows\n\n# æŠ•å…¥ä¿‚æ•°\njpio::input_coef(iotable)\n\n# A dibble:   9\n# Dimensions: input [3], output [3]\n  input$type $name        output$type $name              .\n  &lt;fct&gt;      &lt;chr&gt;        &lt;fct&gt;       &lt;chr&gt;          &lt;dbl&gt;\n1 industry   01_primary   industry    01_primary   0.121  \n2 industry   01_primary   industry    02_secondary 0.0229 \n3 industry   01_primary   industry    03_tertiary  0.00235\n4 industry   02_secondary industry    01_primary   0.226  \n5 industry   02_secondary industry    02_secondary 0.472  \n6 industry   02_secondary industry    03_tertiary  0.108  \n7 industry   03_tertiary  industry    01_primary   0.168  \n8 industry   03_tertiary  industry    02_secondary 0.195  \n9 industry   03_tertiary  industry    03_tertiary  0.267  \n\n# ãƒ¬ã‚ªãƒ³ãƒã‚§ãƒ•é€†è¡Œåˆ—\njpio::leontief_inv(iotable)\n\n# A dibble:   9\n# Dimensions: output [3], input [3]\n  output$type $name        input$type $name              .\n  &lt;fct&gt;       &lt;chr&gt;        &lt;fct&gt;      &lt;chr&gt;          &lt;dbl&gt;\n1 industry    01_primary   industry   01_primary   1.12   \n2 industry    01_primary   industry   02_secondary 0.0361 \n3 industry    01_primary   industry   03_tertiary  0.00716\n4 industry    02_secondary industry   01_primary   0.374  \n5 industry    02_secondary industry   02_secondary 1.68   \n6 industry    02_secondary industry   03_tertiary  0.197  \n7 industry    03_tertiary  industry   01_primary   0.348  \n8 industry    03_tertiary  industry   02_secondary 0.445  \n9 industry    03_tertiary  industry   03_tertiary  1.41   \n\n# çµŒæ¸ˆæ³¢åŠåŠ¹æœ\njpio::spillover_effect(iotable,\n                       list(`01_primary` = 1,\n                            `02_secondary` = 1,\n                            `03_tertiary` = 1))\n\n# A dibble:   3\n# Dimensions: output [3]\n  output$type $name            .\n  &lt;fct&gt;       &lt;chr&gt;        &lt;dbl&gt;\n1 industry    01_primary   0.958\n2 industry    02_secondary 1.85 \n3 industry    03_tertiary  2.03 \n\n# ã‚¹ã‚«ã‚¤ãƒ©ã‚¤ãƒ³ãƒãƒ£ãƒ¼ãƒˆ\njpio::skyline_chart(iotable, \n                    ylim = c(-0.5, NA))"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "My name is Uchida Mizuki.\nI am a classical music lover."
  },
  {
    "objectID": "about.html#apps",
    "href": "about.html#apps",
    "title": "About",
    "section": "Apps",
    "text": "Apps\njpgrid App"
  },
  {
    "objectID": "about.html#games",
    "href": "about.html#games",
    "title": "About",
    "section": "Games",
    "text": "Games\nmultpl"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "UchidaMizuki",
    "section": "",
    "text": "e-Stat APIã«ã¤ã„ã¦Tokyo.Rã§ç™ºè¡¨ã—ã¾ã—ãŸ\n\n\n\n\n\n\n\ne-Stat\n\n\nLT\n\n\nTokyo.R\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nSep 3, 2023\n\n\n\n\n\n\n  \n\n\n\n\nãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹ãƒ¼PCRæ¤œæŸ»ã‚’ä¾‹ã«ãƒ¼\n\n\n\n\n\n\n\nBayes\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nApr 30, 2023\n\n\n\n\n\n\n  \n\n\n\n\nä¸–ä»£é–“ã®ã€Œ1ç¥¨ã®æ ¼å·®ã€ã‚’å®šé‡åŒ–ã—ã¦ã¿ã‚‹\n\n\n\n\n\n\n\nPolitics\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nApr 23, 2023\n\n\n\n\n\n\n  \n\n\n\n\nåœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã®ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã‚’ã¤ãã‚Šã¾ã—ãŸï¼ˆR Shiny&jpgridï¼‰\n\n\n\n\n\n\n\nShiny\n\n\njpgrid\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nFeb 16, 2023\n\n\n\n\n\n\n  \n\n\n\n\nRã§äººå£ãƒ”ãƒ©ãƒŸãƒƒãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹\n\n\n\n\n\n\n\nggplot2\n\n\ngganimate\n\n\ne-Stat\n\n\njpstat\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nJan 1, 2023\n\n\n\n\n\n\n  \n\n\n\n\nRã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã‚ˆã†ï¼ˆe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ï¼‰\n\n\n\n\n\n\n\ne-Stat\n\n\njpstat\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nDec 12, 2022\n\n\n\n\n\n\n  \n\n\n\n\nCSVã®ä»£ã‚ã‚Šã«Parquetã‚’ä½¿ã£ã¦ã¿ã‚ˆã†\n\n\n\n\n\n\n\nparquet\n\n\narrow\n\n\nR\n\n\nPython\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nJun 12, 2022\n\n\n\n\n\n\n  \n\n\n\n\nRã§æ—¥æœ¬åœ°å›³ã‚’æã„ã¦ã¿ã‚ˆã†\n\n\n\n\n\n\n\nggplot2\n\n\nsf\n\n\njpmap\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nJun 11, 2022\n\n\n\n\n\n\n  \n\n\n\n\nRã§ç”£æ¥­é€£é–¢åˆ†æ\n\n\n\n\n\n\n\nioanalysis\n\n\ndibble\n\n\nR\n\n\nJapanese\n\n\n\n\n\n\n\n\n\n\n\nMay 31, 2022\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html",
    "href": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html",
    "title": "Rã§æ—¥æœ¬åœ°å›³ã‚’æã„ã¦ã¿ã‚ˆã†",
    "section": "",
    "text": "Rã§ã¯ï¼Œggplot2ãªã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã™ã‚‹ã ã‘ã§ï¼Œãã‚Œã„ãªæ—¥æœ¬åœ°å›³ï¼ˆéƒ½é“åºœçœŒåˆ¥ï¼‰ã‚’æãã“ã¨ãŒã§ãã¾ã™ï¼\nã“ã“ã§ã¯ï¼Œæ—¥æœ¬åœ°å›³ã‚’ggplot2ã§æç”»ã™ã‚‹æ–¹æ³•ã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ï¼"
  },
  {
    "objectID": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#åœ°å›³æç”»ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿",
    "href": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#åœ°å›³æç”»ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿",
    "title": "Rã§æ—¥æœ¬åœ°å›³ã‚’æã„ã¦ã¿ã‚ˆã†",
    "section": "åœ°å›³æç”»ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿",
    "text": "åœ°å›³æç”»ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\nã“ã“ã§ã¯ï¼Œã“ã¡ã‚‰ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ç¤¾ä¼šãƒ»äººå£çµ±è¨ˆä½“ç³»ã®2015å¹´ã®éƒ½é“åºœçœŒåˆ¥å¤–å›½äººäººå£æ¯”ç‡ãƒ‡ãƒ¼ã‚¿ï¼ˆ10ä¸‡äººã‚ãŸã‚Šå¤–å›½äººäººå£ï¼‰ã‚’åœ°å›³æç”»ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¾ã—ãŸï¼\n\n\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿\nlibrary(tidyverse)\n\n\n\n\nãƒ‡ãƒ¼ã‚¿ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\nlibrary(jpstat)\nlibrary(arrow)\n\nappId &lt;- keyring::key_get(\"estat-api\")\nforeigner_ratio_2015 &lt;- estat(appId, \"https://www.e-stat.go.jp/en/dbview?sid=0000010201\",\n                              lang = \"E\")\nforeigner_ratio_2015 &lt;- foreigner_ratio_2015 |&gt; \n  activate(tab) |&gt; \n  select() |&gt; \n  \n  activate(cat01) |&gt; \n  # Ratio of population of foreigners (per 100,000 persons)\n  filter(code == \"#A01601\") |&gt; \n  select() |&gt; \n  \n  activate(area) |&gt; \n  filter(name != \"All Japan\") |&gt; \n  select(code, name) |&gt; \n  rekey(\"pref\") |&gt; \n  \n  activate(time) |&gt; \n  filter(name == \"2015\") |&gt; \n  select()\nforeigner_ratio_2015 &lt;- foreigner_ratio_2015 |&gt; \n  collect(\"foreigners_per_100K\")\n\nwrite_parquet(foreigner_ratio_2015, \"foreigner_ratio_2015.parquet\")\n\n\n\n\nãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿\nlibrary(arrow)\n\nforeigner_ratio_2015 &lt;- read_parquet(\"foreigner_ratio_2015.parquet\") |&gt; \n  mutate(pref_code = pref_code |&gt; \n           str_extract(\"^\\\\d{2}\") |&gt; \n           parse_integer(),\n         \n         pref_name = pref_name |&gt; \n           str_remove(\"-.+$\"),\n         pref_name = case_when(pref_name == \"Gumma\" ~ \"Gunma\",\n                               TRUE ~ pref_name),\n         \n         foreigner_ratio = parse_number(foreigners_per_100K) / 1e5,\n         .keep = \"unused\")\n\n\n\nforeigner_ratio_2015\n\n# A tibble: 47 Ã— 3\n   pref_code pref_name foreigner_ratio\n       &lt;int&gt; &lt;chr&gt;               &lt;dbl&gt;\n 1         1 Hokkaido          0.00403\n 2         2 Aomori            0.00264\n 3         3 Iwate             0.00392\n 4         4 Miyagi            0.00599\n 5         5 Akita             0.00285\n 6         6 Yamagata          0.00490\n 7         7 Fukushima         0.00456\n 8         8 Ibaraki           0.0142 \n 9         9 Tochigi           0.0134 \n10        10 Gunma             0.0188 \n# â„¹ 37 more rows"
  },
  {
    "objectID": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#geom_map-ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã",
    "href": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#geom_map-ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã",
    "title": "Rã§æ—¥æœ¬åœ°å›³ã‚’æã„ã¦ã¿ã‚ˆã†",
    "section": "geom_map() ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã",
    "text": "geom_map() ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã\nggplot2ã§ã¯ï¼Œmap_data() ã‚„geom_map() ã‚’ä½¿ã†ã“ã¨ã§ï¼Œä¸–ç•Œã®å›½ã€…ã‚’æç”»ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã“ã‚Œã«ã¯ï¼Œmapsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’äºˆã‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ã¾ãŸï¼Œæ—¥æœ¬åœ°å›³ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ï¼Œmapsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«åŠ ãˆã¦ï¼Œmapdataãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦ã«ãªã‚Šã¾ã™ï¼\nmap_data(\"japan\") ã¨ã™ã‚‹ã“ã¨ã§ï¼Œmapsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åœ°å›³ãƒ‡ãƒ¼ã‚¿ãŒãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›ã•ã‚Œã¾ã™ï¼ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã®region åˆ—ãŒéƒ½é“åºœçœŒã®IDã¨ãªã‚‹ãŸã‚ï¼Œaes(map_id = region)ã‚’è¨­å®šã—ãŸä¸Šã§ï¼Œgeom_map() ã™ã‚‹ã“ã¨ã§ï¼Œæç”»ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã®region åˆ—ã¨éƒ½é“åºœçœŒã‚¸ã‚ªãƒ¡ãƒˆãƒªãŒãƒªãƒ³ã‚¯ã—ã¾ã™ï¼\nãŸã ã—ï¼Œmap_data(\"japan\") ã¯ï¼Œä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™ï¼\n\nregion åˆ—ã¯ã™ã¹ã¦ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆè¡¨è¨˜ã§ã‚ã‚‹\nä»–ã®éƒ½é“åºœçœŒã¨é•ã„ï¼Œå¥ˆè‰¯çœŒã ã‘ãŒãŒNARA ã¨å¤§æ–‡å­—è¡¨è¨˜ã«ãªã£ã¦ã„ã‚‹ãªã©ï¼Œå…ƒãƒ‡ãƒ¼ã‚¿ã«å•é¡Œã‚ã‚Š\n\nã“ã“ã§ã¯ï¼Œstr_to_title()ã§ä¿®æ­£\n\n\nã¾ãŸï¼Œæ—¥æœ¬åœ°å›³å…¨ä½“ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã¯ï¼Œexpand_limits() ãªã©ã§è»¸ã‚’è¨­å®šã™ã‚‹ã“ã¨å¿…è¦ã«ãªã‚Šã¾ã™ï¼\n\n# pak::pak(\"maps\")\n# pak::pak(\"mapdata\")\nlibrary(tidyverse)\nlibrary(mapdata)\n\nmap_data_japan &lt;- map_data(\"japan\") |&gt; \n  as_tibble() |&gt; \n  mutate(region = str_to_title(region))\nmap_data_japan\n\n# A tibble: 46,975 Ã— 6\n    long   lat group order region   subregion\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;    \n 1  140.  42.3     1     1 Hokkaido &lt;NA&gt;     \n 2  140.  42.3     1     2 Hokkaido &lt;NA&gt;     \n 3  140.  42.3     1     3 Hokkaido &lt;NA&gt;     \n 4  140.  42.3     1     4 Hokkaido &lt;NA&gt;     \n 5  140.  42.3     1     5 Hokkaido &lt;NA&gt;     \n 6  140.  42.3     1     6 Hokkaido &lt;NA&gt;     \n 7  140.  42.3     1     7 Hokkaido &lt;NA&gt;     \n 8  140.  42.3     1     8 Hokkaido &lt;NA&gt;     \n 9  140.  42.3     1     9 Hokkaido &lt;NA&gt;     \n10  140.  42.3     1    10 Hokkaido &lt;NA&gt;     \n# â„¹ 46,965 more rows\n\nggplot(foreigner_ratio_2015 |&gt; \n         rename(region = pref_name),\n       aes(map_id = region)) +\n  geom_map(aes(fill = foreigner_ratio),\n           map = map_data_japan) +\n  expand_limits(x = map_data_japan$long,\n                y = map_data_japan$lat) +\n  scale_fill_viridis_c(\"å¤–å›½äººäººå£æ¯”ç‡\",\n                       limits = c(0, 0.03),\n                       labels = scales::label_percent(),\n                       option = \"turbo\")"
  },
  {
    "objectID": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#sfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã",
    "href": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#sfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã",
    "title": "Rã§æ—¥æœ¬åœ°å›³ã‚’æã„ã¦ã¿ã‚ˆã†",
    "section": "sfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã",
    "text": "sfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦æ—¥æœ¬åœ°å›³ã‚’æã\næœ€è¿‘ã§ã¯ï¼Œsfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¸ã‚ªãƒ¡ãƒˆãƒªãŒggplot2ã§ç°¡å˜ã«æç”»ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ï¼\nã¾ãŸï¼Œmapsãƒ»mapdataãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æä¾›ã™ã‚‹åœ°å›³ãƒ‡ãƒ¼ã‚¿ã¯ï¼Œsfãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®st_as_sf() ã§sfã®ã‚¸ã‚ªãƒ¡ãƒˆãƒªãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\næ—¥æœ¬åœ°å›³ãƒ‡ãƒ¼ã‚¿ã‚’sfã«å¤‰æ›ã™ã‚‹ã“ã¨ã§ï¼Œå…ˆã»ã©ã‚ˆã‚Šã‚‚ç›´æ„Ÿçš„ã«åœ°å›³ã‚’æãã“ã¨ãŒã§ãã¾ã™ï¼\n\nlibrary(sf)\n\nmap_japan &lt;- maps::map(\"japan\", \n                       plot = FALSE,\n                       fill = TRUE) |&gt; \n  st_as_sf() |&gt; \n  rename(pref_name = ID) |&gt; \n  mutate(pref_name = str_to_title(pref_name))\n\nmap_japan |&gt; \n  left_join(foreigner_ratio_2015,\n            by = \"pref_name\") |&gt; \n  ggplot(aes(fill = foreigner_ratio)) +\n  geom_sf(color = \"transparent\") +\n  scale_fill_viridis_c(\"å¤–å›½äººäººå£æ¯”ç‡\",\n                       limits = c(0, 0.03),\n                       labels = scales::label_percent(),\n                       option = \"turbo\")"
  },
  {
    "objectID": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#ã‚‚ã£ã¨ç°¡å˜ã«æ—¥æœ¬åœ°å›³ã‚’æã",
    "href": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#ã‚‚ã£ã¨ç°¡å˜ã«æ—¥æœ¬åœ°å›³ã‚’æã",
    "title": "Rã§æ—¥æœ¬åœ°å›³ã‚’æã„ã¦ã¿ã‚ˆã†",
    "section": "ã‚‚ã£ã¨ç°¡å˜ã«æ—¥æœ¬åœ°å›³ã‚’æã",
    "text": "ã‚‚ã£ã¨ç°¡å˜ã«æ—¥æœ¬åœ°å›³ã‚’æã\njpmapã¯ï¼Œggplot2ã«ã‚ˆã‚‹æ—¥æœ¬åœ°å›³ã®æç”»ã‚’ã‚ˆã‚Šç°¡å˜ã«ã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ï¼\njpmapã¯ï¼Œä»¥ä¸‹ã®2ã¤ã®æ©Ÿèƒ½ã‚’æŒã¡ã¾ã™ï¼\n\næ—¥æœ¬èªã®éƒ½é“åºœçœŒåã‚„éƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰ãŒå«ã‚€éƒ½é“åºœçœŒãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ï¼ˆjpmap::prefectureï¼‰\nç‰çƒè«¸å³¶ãƒ»å°ç¬ åŸè«¸å³¶ã‚’å†é…ç½®ã—ãŸãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å¯èƒ½ã«ï¼ˆjpmap::layout_islands()ï¼‰\n\njpmap::layout_islands() ã§åœ°å›³ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ï¼Œéƒ½é“åºœçœŒã”ã¨ã®å‚¾å‘ãŒã‚ˆã‚Šã‚ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ï¼\n\n# pak::pak(\"UchidaMizuki/jpmap\")\njpmap::prefecture\n\nSimple feature collection with 47 features and 3 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 122.9382 ymin: 24.2121 xmax: 153.9856 ymax: 45.52041\nGeodetic CRS:  JGD2011\n# A tibble: 47 Ã— 4\n   pref_code pref_name pref_name_ja                                     geometry\n       &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;                                  &lt;MULTIPOLYGON [Â°]&gt;\n 1         1 Hokkaido  åŒ—æµ·é“       (((143.8965 44.15815, 143.9118 44.15229, 14â€¦\n 2         2 Aomori    é’æ£®çœŒ       (((139.9438 40.42928, 139.9426 40.43439, 13â€¦\n 3         3 Iwate     å²©æ‰‹çœŒ       (((141.681 40.45101, 141.6909 40.44229, 141â€¦\n 4         4 Miyagi    å®®åŸçœŒ       (((141.6403 38.9675, 141.6406 38.9652, 141.â€¦\n 5         5 Akita     ç§‹ç”°çœŒ       (((139.8809 39.11511, 139.8919 39.13321, 13â€¦\n 6         6 Yamagata  å±±å½¢çœŒ       (((139.5487 38.545, 139.5801 38.60688, 139.â€¦\n 7         7 Fukushima ç¦å³¶çœŒ       (((140.9332 37.8898, 140.9334 37.88923, 140â€¦\n 8         8 Ibaraki   èŒ¨åŸçœŒ       (((140.7973 36.84649, 140.7931 36.83755, 14â€¦\n 9         9 Tochigi   æ ƒæœ¨çœŒ       (((139.6537 36.20314, 139.6385 36.22575, 13â€¦\n10        10 Gunma     ç¾¤é¦¬çœŒ       (((138.6795 36.73065, 138.7227 36.74918, 13â€¦\n# â„¹ 37 more rows\n\nplot &lt;- jpmap::prefecture |&gt; \n  left_join(foreigner_ratio_2015,\n            by = c(\"pref_code\", \"pref_name\")) |&gt; \n  ggplot(aes(fill = foreigner_ratio)) +\n  geom_sf(color = \"transparent\") +\n  scale_fill_viridis_c(\"å¤–å›½äººäººå£æ¯”ç‡\",\n                       limits = c(0, 0.03),\n                       labels = scales::label_percent(),\n                       option = \"turbo\")\n\njpmap::layout_islands(plot,\n                      ogasawara = FALSE)\n\nWarning: `layout_islands()` was deprecated in jpmap 0.2.0.\nâ„¹ Please use `layout_japan()` instead."
  },
  {
    "objectID": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#ã¾ã¨ã‚åœ°å›³ã‹ã‚‰ã‚ã‹ã£ãŸã“ã¨",
    "href": "posts/2022/06/draw-a-map-of-japan-in-r-ja.html#ã¾ã¨ã‚åœ°å›³ã‹ã‚‰ã‚ã‹ã£ãŸã“ã¨",
    "title": "Rã§æ—¥æœ¬åœ°å›³ã‚’æã„ã¦ã¿ã‚ˆã†",
    "section": "ã¾ã¨ã‚ï¼ˆåœ°å›³ã‹ã‚‰ã‚ã‹ã£ãŸã“ã¨ï¼‰",
    "text": "ã¾ã¨ã‚ï¼ˆåœ°å›³ã‹ã‚‰ã‚ã‹ã£ãŸã“ã¨ï¼‰\n2015å¹´ã®éƒ½é“åºœçœŒåˆ¥å¤–å›½äººäººå£æ¯”ç‡ã«é–¢ã™ã‚‹æ—¥æœ¬åœ°å›³ã‹ã‚‰ä»¥ä¸‹ã®ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸï¼\n\n2015å¹´ã§ã¯ã©ã®éƒ½é“åºœçœŒã§ã‚‚å¤–å›½äººäººå£æ¯”ç‡ãŒ3ï¼…ä»¥ä¸‹ã§ã‚ã‚‹\næ±äº¬éƒ½ã¯å¤–å›½äººäººå£æ¯”ç‡ãŒæœ€ã‚‚å¤šãï¼Œæ„›çŸ¥çœŒã‚„ç¾¤é¦¬çœŒãªã©ã‚‚å¤–å›½äººå£æ¯”ç‡ãŒé«˜ã„ï¼\n\nã“ã“ã¾ã§ï¼Œggplot2ãªã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ´»ç”¨ã—ãŸæ—¥æœ¬åœ°å›³ã®æç”»ã‚’è©¦ã—ã¦ã¿ã¾ã—ãŸï¼\nãã®çµæœï¼ŒRã‚’ä½¿ãˆã°ï¼Œè‡ªå‰ã§ãƒ‡ãƒ¼ã‚¿ã‚’æ•´å‚™ã—ãªãã¦ã‚‚ï¼Œç°¡å˜ã«æ—¥æœ¬åœ°å›³ã‚’æã‘ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸï¼ã¿ãªã•ã‚“ã‚‚ãœã²ï¼Œggplot2ã‚’ä½¿ã£ã¦ï¼Œè‰²ã€…ãªåœ°å›³ã‚’ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ï¼"
  },
  {
    "objectID": "posts/2022/12/call-e-stat-api-in-r.html",
    "href": "posts/2022/12/call-e-stat-api-in-r.html",
    "title": "Rã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã‚ˆã†ï¼ˆe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ï¼‰",
    "section": "",
    "text": "ã“ã®è¨˜äº‹ã¯ã€ŒR Advent Calendar 2022ã€ã®12æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼\næ˜¨å¹´ï¼Œæ—¥æœ¬ã§æ”¿åºœçµ±è¨ˆã®æ•´å‚™ãŒå§‹ã¾ã£ã¦ã‹ã‚‰150å¹´ã‚’è¿ãˆã¾ã—ãŸï¼ˆå¹³æˆãƒ»ä»¤å’Œã®çµ±è¨ˆå¹´è¡¨ï¼‰ï¼æœ€è¿‘ã§ã¯ï¼Œæ”¿åºœçµ±è¨ˆã®ç·åˆçª“å£ï¼ˆe-Statï¼‰ã§ï¼Œæ§˜ã€…ãªæ”¿åºœçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’é–²è¦§ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼\ne-Statã«ã¯ï¼Œä¾¿åˆ©ãªAPIæ©Ÿèƒ½ã‚‚æä¾›ã•ã‚Œã¦ã„ã¾ã™ï¼ˆåˆ©ç”¨ã‚¬ã‚¤ãƒ‰ã¯ã“ã¡ã‚‰ï¼ã‚ã‚‰ã‹ã˜ã‚åˆ©ç”¨è¦ç´„ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼APIæ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹éš›ã¯ï¼Œäº‹å‰ã«ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ã‚’è¡Œã£ã¦ãã ã•ã„ï¼‰ï¼\nã“ã®è¨˜äº‹ã§ã¯ï¼ŒRã®jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ï¼Œe-Stat APIã‚’åŠ¹ç‡çš„ã«ç”¨ã„ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ï¼"
  },
  {
    "objectID": "posts/2022/12/call-e-stat-api-in-r.html#ã“ã®è¨˜äº‹ã«ã¤ã„ã¦",
    "href": "posts/2022/12/call-e-stat-api-in-r.html#ã“ã®è¨˜äº‹ã«ã¤ã„ã¦",
    "title": "Rã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã‚ˆã†ï¼ˆe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ï¼‰",
    "section": "",
    "text": "ã“ã®è¨˜äº‹ã¯ã€ŒR Advent Calendar 2022ã€ã®12æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼\næ˜¨å¹´ï¼Œæ—¥æœ¬ã§æ”¿åºœçµ±è¨ˆã®æ•´å‚™ãŒå§‹ã¾ã£ã¦ã‹ã‚‰150å¹´ã‚’è¿ãˆã¾ã—ãŸï¼ˆå¹³æˆãƒ»ä»¤å’Œã®çµ±è¨ˆå¹´è¡¨ï¼‰ï¼æœ€è¿‘ã§ã¯ï¼Œæ”¿åºœçµ±è¨ˆã®ç·åˆçª“å£ï¼ˆe-Statï¼‰ã§ï¼Œæ§˜ã€…ãªæ”¿åºœçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’é–²è¦§ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼\ne-Statã«ã¯ï¼Œä¾¿åˆ©ãªAPIæ©Ÿèƒ½ã‚‚æä¾›ã•ã‚Œã¦ã„ã¾ã™ï¼ˆåˆ©ç”¨ã‚¬ã‚¤ãƒ‰ã¯ã“ã¡ã‚‰ï¼ã‚ã‚‰ã‹ã˜ã‚åˆ©ç”¨è¦ç´„ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼APIæ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹éš›ã¯ï¼Œäº‹å‰ã«ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ã‚’è¡Œã£ã¦ãã ã•ã„ï¼‰ï¼\nã“ã®è¨˜äº‹ã§ã¯ï¼ŒRã®jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ï¼Œe-Stat APIã‚’åŠ¹ç‡çš„ã«ç”¨ã„ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ï¼"
  },
  {
    "objectID": "posts/2022/12/call-e-stat-api-in-r.html#e-statã«ã¤ã„ã¦",
    "href": "posts/2022/12/call-e-stat-api-in-r.html#e-statã«ã¤ã„ã¦",
    "title": "Rã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã‚ˆã†ï¼ˆe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ï¼‰",
    "section": "e-Statã«ã¤ã„ã¦",
    "text": "e-Statã«ã¤ã„ã¦\ne-Statã«ã¯ï¼Œæ§˜ã€…ãªæ”¿åºœçµ±è¨ˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ•´ç†ã•ã‚Œã¦ã„ã¾ã™ãŒï¼Œã“ã“ã§ã¯ï¼Œ2015å¹´å›½æ°‘å¥åº·ãƒ»æ „é¤Šèª¿æŸ»ã®èª¿æŸ»çµæœã‹ã‚‰ç¡çœ æ™‚é–“ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é–‹ãã¨ä»¥ä¸‹ã®ã‚ˆã†ã«çµ±è¨ˆè¡¨ãŒè¡¨ç¤ºã•ã‚Œï¼Œå³ä¸Šã®ã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\n\n\ne-Statãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼šçµ±è¨ˆè¡¨è¡¨ç¤ºç”»é¢\n\n\nç”»é¢å·¦ä¸Šã®ã€Œè¡¨ç¤ºé …ç›®é¸æŠã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ï¼Œè¡¨ç¤ºã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®é …ç›®ï¼ˆå¹´é½¢éšç´šãƒ»æ€§åˆ¥ãªã©ï¼‰ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\n\n\ne-Statãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼šè¡¨ç¤ºé …ç›®é¸æŠç”»é¢\n\n\nãŸã¨ãˆã°ï¼Œå¹´é½¢éšç´šã‚’é¸æŠã—ãŸã„å ´åˆã¯ï¼Œå¹´é½¢éšç´šã®ã€Œé …ç›®ã‚’é¸æŠã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã§å¹´é½¢éšç´šã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\n\n\ne-Statãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼šè¡¨ç¤ºé …ç›®ã®è¨­å®šç”»é¢\n\n\nè¡¨ç¤ºé …ç›®ã‚’é¸æŠã—ãŸå¾Œã«ï¼Œã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ï¼Œé¸æŠã—ãŸé …ç›®ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\nã“ã®ã‚ˆã†ã«ï¼Œe-Statã§ã¯ï¼Œç°¡å˜ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã—ã‹ã—ï¼Œãƒ‡ãƒ¼ã‚¿å–å¾—ä½œæ¥­ã®å†ç¾æ€§ã‚’é«˜ã‚ãŸã‚Šï¼Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ç”¨ã„ãŸãƒ‡ãƒ¼ã‚¿æŠ½å‡ºãƒ»å–å¾—ã®åŠ¹ç‡åŒ–ã‚’è¡Œã£ãŸã‚Šã—ãŸã„å ´åˆã¯ï¼Œe-Stat APIã‚’ç”¨ã„ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ï¼"
  },
  {
    "objectID": "posts/2022/12/call-e-stat-api-in-r.html#jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§e-stat-apiã‚’ä½¿ã†",
    "href": "posts/2022/12/call-e-stat-api-in-r.html#jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§e-stat-apiã‚’ä½¿ã†",
    "title": "Rã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã‚ˆã†ï¼ˆe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ï¼‰",
    "section": "jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§e-Stat APIã‚’ä½¿ã†",
    "text": "jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§e-Stat APIã‚’ä½¿ã†\nä¸Šã§èª¬æ˜ã—ãŸe-Statã§ã®ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’e-Stat APIã§è¡Œã†ãŸã‚ã«ã¯ï¼Œä»¥ä¸‹ã®ã‚ˆã†ãªã‚¹ãƒ†ãƒƒãƒ—ã‚’è¸ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼\n\nãƒ¡ã‚¿æƒ…å ±å–å¾—ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šï¼šè¡¨ç¤ºé …ç›®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ãƒ»é¸æŠï¼Œé¸æŠé …ç›®ã«å¯¾å¿œã™ã‚‹APIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š\nçµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—ï¼šé¸æŠã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ãƒ»è¡¨ãƒ‡ãƒ¼ã‚¿ã«æ•´å½¢ã™ã‚‹\n\njpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ï¼Œã“ã‚Œã‚‰ã®ä¸€é€£ã®ä½œæ¥­ã‚’Rä¸Šã§åŠ¹ç‡çš„ã«è¡Œã†ãŸã‚é–‹ç™ºã•ã‚ŒãŸã‚‚ã®ã§ã™1ï¼jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ï¼ŒCRANã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\nã“ã“ã§ã¯ï¼Œç”·å¥³ãƒ»å¹´é½¢éšç´šåˆ¥ã®ç¡çœ æ™‚é–“ã‚’ã‚°ãƒ©ãƒ•åŒ–ã™ã‚‹ã“ã¨ã‚’ç›®æ¨™ã¨ã—ã¦ï¼Œã•ãã»ã©å–ã‚Šä¸Šã’ãŸç¡çœ æ™‚é–“ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆ2015å¹´ï¼‰ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ã¾ãšï¼Œå¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã¿ã¾ã™ï¼\n\ninstall.packages(\"jpstat\")\n\n\nlibrary(tidyverse)\nlibrary(jpstat)\n\n\nã‚¹ãƒ†ãƒƒãƒ—1ï¼šãƒ¡ã‚¿æƒ…å ±ï¼ˆè¡¨ç¤ºé …ç›®ï¼‰ã‚’è¡¨ç¤ºãƒ»æŠ½å‡ºã™ã‚‹\ne-Stat APIã‚’ç”¨ã„ã‚‹ãŸã‚ã«ã¯ï¼Œäº‹å‰ã«ãƒ¦ãƒ¼ã‚¶ç™»éŒ²ã‚’è¡Œã„ï¼ŒappId ã¨å‘¼ã°ã‚Œã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³IDã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™2ï¼\nestat() é–¢æ•°ã«ï¼ŒappId ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®URLï¼ˆã¾ãŸã¯çµ±è¨ˆè¡¨IDï¼šstatsDataIdï¼‰ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ã§ãƒ¡ã‚¿æƒ…å ±ï¼ˆè¡¨ç¤ºé …ç›®ï¼‰ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™3ï¼\nã¯ã˜ã‚ã«ï¼Œãƒ¡ã‚¿æƒ…å ±ã®ã†ã¡ã€Œå¹´é½¢éšç´šï¼ˆcat01ï¼‰ã€ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆcat01ã¯APIä¸Šã§ã®åˆ†é¡åã§ã™ï¼‰ï¼activate() é–¢æ•°ã«ã‚ˆã‚Šãƒ¡ã‚¿æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã•ã‚‰ã«ï¼Œfilter() é–¢æ•°ã«ã‚ˆã‚Šé …ç›®ã‚’é¸æŠã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã“ã“ã§ã¯ï¼Œå¹´é½¢éšç´šåˆ¥ãƒ‡ãƒ¼ã‚¿ã®ã¿ãŒå¿…è¦ã§ã‚ã‚‹ãŸã‚ï¼Œã€Œç·æ•°ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™4ï¼\nãƒ‘ã‚¤ãƒ—æ¼”ç®—å­|&gt; ã‚’ä½¿ã†ã“ã¨ã§ï¼Œä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œcat01ä»¥å¤–ã®ãƒ¡ã‚¿æƒ…å ±ã®ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã‚’ç¶šã‘ã¦è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼ã“ã“ã§ã¯ï¼Œç”·å¥³ãƒ»å¹´é½¢éšç´šãƒ»ç¡çœ æ™‚é–“åˆ¥ã®å›ç­”è€…æ•°ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã¦ã„ã¾ã™ï¼\n\n# ã”è‡ªèº«ã®appIdã«ç½®ãæ›ãˆã¦ãã ã•ã„\nSys.setenv(ESTAT_API_KEY = \"Your appId\")\n\n\nestat_sleeptime_2015 &lt;- estat(statsDataId = \"https://www.e-stat.go.jp/dbview?sid=0003224282\")\n\n\n# ãƒ¡ã‚¿æƒ…å ±ã®é–²è¦§ãƒ»é¸æŠ\nestat_sleeptime_2015 |&gt; \n  activate(cat01) |&gt; \n  filter(name != \"ç·æ•°\")\n\n# â˜ tab:   è¡¨ç« é …ç›®     [2] &lt;code, name, level, unit&gt;\n# â˜’ cat01: å¹´é½¢éšç´š     [6] &lt;code, name, level, parentCode&gt;\n# â˜ cat02: ç¡çœ ã®è³ª     [8] &lt;code, name, level, parentCode&gt;\n# â˜ cat03: æ€§åˆ¥         [3] &lt;code, name, level, parentCode&gt;\n# â˜ cat04: å¹³å‡ç¡çœ æ™‚é–“ [6] &lt;code, name, level, parentCode&gt;\n# â˜ time:  æ™‚é–“è»¸(å¹´æ¬¡) [1] &lt;code, name, level&gt;\n# \n# A tibble: 6 Ã— 4\n  code  name      level parentCode\n  &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;     \n1 160   20æ­³-29æ­³ 2     100       \n2 170   30æ­³-39æ­³ 2     100       \n3 180   40æ­³-49æ­³ 2     100       \n4 190   50æ­³-59æ­³ 2     100       \n5 210   60æ­³-69æ­³ 2     100       \n6 220   70æ­³ä»¥ä¸Š  2     100       \n\n\n\nestat_sleeptime_2015_filtered &lt;- estat_sleeptime_2015 |&gt; \n  \n  # è¡¨ç« é …ç›®\n  activate(tab) |&gt; \n  filter(name == \"äººæ•°\") |&gt; \n  \n  # å¹´é½¢éšç´š\n  activate(cat01) |&gt; \n  filter(name != \"ç·æ•°\") |&gt; \n  \n  # ç¡çœ ã®è³ª\n  activate(cat02) |&gt; \n  filter(name == \"ç·æ•°\") |&gt; \n  \n  # æ€§åˆ¥\n  activate(cat03) |&gt; \n  filter(name %in% c(\"ç”·æ€§\", \"å¥³æ€§\"))\n\n\n\nã‚¹ãƒ†ãƒƒãƒ—2ï¼šçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼‰ã™ã‚‹\nãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºå¾Œã«collect() ã‚’é©ç”¨ã™ã‚‹ã“ã¨ã§çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã¾ãŸï¼Œcollect()ã®nå¼•æ•°ã§ï¼Œå–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®åˆ—ã‚’åä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã“ã“ã§ã¯ï¼Œ\"person\"ã¨åä»˜ã‘ã¾ã™ï¼\nå–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿data_sleeptime_2015ã‚’è¦‹ã‚‹ã¨ï¼Œï¼ˆãŸãã•ã‚“ã®åˆ—ãŒå­˜åœ¨ã™ã‚‹ï¼‰åˆ†æã—ã¥ã‚‰ã„ãƒ‡ãƒ¼ã‚¿ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼ã‚¹ãƒ†ãƒƒãƒ—2+Î±ã§ï¼Œãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ãƒ‡ãƒ¼ã‚¿æ•´å½¢ã‚’åŒæ™‚ã«è¡Œã†æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ï¼\n\ndata_sleeptime_2015 &lt;- estat_sleeptime_2015_filtered |&gt; \n  \n  # ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»æ•°å€¤ã«å¤‰æ›\n  collect(n = \"person\") |&gt; \n  mutate(person = parse_number(person))\n\nThe total number of data is 72.\n\nknitr::kable(head(data_sleeptime_2015, 10))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntab_code\ntab_name\ntab_level\ntab_unit\ncat01_code\ncat01_name\ncat01_level\ncat01_parentCode\ncat02_code\ncat02_name\ncat02_level\ncat02_parentCode\ncat03_code\ncat03_name\ncat03_level\ncat03_parentCode\ncat04_code\ncat04_name\ncat04_level\ncat04_parentCode\ntime_code\ntime_name\ntime_level\nperson\n\n\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n110\nç”·æ€§\n2\n100\n110\nï¼•æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n23\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n110\nç”·æ€§\n2\n100\n120\nï¼•æ™‚é–“ä»¥ä¸Šï¼–æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n86\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n110\nç”·æ€§\n2\n100\n130\nï¼–æ™‚é–“ä»¥ä¸Šï¼—æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n88\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n110\nç”·æ€§\n2\n100\n140\nï¼—æ™‚é–“ä»¥ä¸Šï¼˜æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n37\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n110\nç”·æ€§\n2\n100\n150\nï¼˜æ™‚é–“ä»¥ä¸Šï¼™æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n19\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n110\nç”·æ€§\n2\n100\n160\nï¼™æ™‚é–“ä»¥ä¸Š\n2\n100\n2015000000\n2015å¹´\n1\n3\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n120\nå¥³æ€§\n2\n100\n110\nï¼•æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n28\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n120\nå¥³æ€§\n2\n100\n120\nï¼•æ™‚é–“ä»¥ä¸Šï¼–æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n106\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n120\nå¥³æ€§\n2\n100\n130\nï¼–æ™‚é–“ä»¥ä¸Šï¼—æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n94\n\n\n100\näººæ•°\n\näºº\n160\n20æ­³-29æ­³\n2\n100\n100\nç·æ•°\n1\nNA\n120\nå¥³æ€§\n2\n100\n140\nï¼—æ™‚é–“ä»¥ä¸Šï¼˜æ™‚é–“æœªæº€\n2\n100\n2015000000\n2015å¹´\n1\n55\n\n\n\n\n\n\n\nã‚¹ãƒ†ãƒƒãƒ—2+Î±ï¼šãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ãƒ‡ãƒ¼ã‚¿æ•´å½¢ã‚’åŒæ™‚ã«è¡Œã†\njpstatã§e-Statã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã¨ï¼Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åï¼ˆcat01ãªã©ï¼‰ã¨å„é …ç›®ã®åˆ—åï¼ˆcodeï¼Œ nameãªã©ï¼‰ã‹ã‚‰åˆ—ï¼ˆcat01_codeï¼Œcat01_nameãªã©ï¼‰ãŒä½œæˆã•ã‚Œã¾ã™ï¼\njpstatã§ã¯ï¼Œrekey() é–¢æ•°ã«ã‚ˆã‚Šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã‚’å¤‰æ›´ã—ãŸã‚Šï¼Œselect() é–¢æ•°ã§é …ç›®åˆ¥ã«åˆ—ã‚’é¸æŠã—ãŸã‚Šã™ã‚‹ã“ã¨ã§ãƒ‡ãƒ¼ã‚¿ã‚’æ•´ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™5ï¼ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ï¼Œã™ã£ãã‚Šã¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\ndata_sleeptime_2015 &lt;- estat_sleeptime_2015 |&gt; \n  activate(tab) |&gt; \n  filter(name == \"äººæ•°\") |&gt; \n  select() |&gt; \n  \n  activate(cat01) |&gt; \n  rekey(\"ageclass\") |&gt; \n  filter(name != \"ç·æ•°\") |&gt; \n  select(name) |&gt; \n  \n  activate(cat02) |&gt; \n  filter(name == \"ç·æ•°\") |&gt; \n  select() |&gt; \n  \n  activate(cat03) |&gt; \n  rekey(\"sex\") |&gt; \n  filter(name %in% c(\"ç”·æ€§\", \"å¥³æ€§\")) |&gt; \n  select(name) |&gt; \n  \n  activate(cat04) |&gt; \n  rekey(\"sleeptime\") |&gt; \n  select(name) |&gt; \n  \n  activate(time) |&gt; \n  select() |&gt; \n  \n  collect(n = \"person\") |&gt; \n  mutate(person = parse_number(person))\n\nThe total number of data is 72.\n\nknitr::kable(head(data_sleeptime_2015, 10))\n\n\n\n\nageclass_name\nsex_name\nsleeptime_name\nperson\n\n\n\n\n20æ­³-29æ­³\nç”·æ€§\nï¼•æ™‚é–“æœªæº€\n23\n\n\n20æ­³-29æ­³\nç”·æ€§\nï¼•æ™‚é–“ä»¥ä¸Šï¼–æ™‚é–“æœªæº€\n86\n\n\n20æ­³-29æ­³\nç”·æ€§\nï¼–æ™‚é–“ä»¥ä¸Šï¼—æ™‚é–“æœªæº€\n88\n\n\n20æ­³-29æ­³\nç”·æ€§\nï¼—æ™‚é–“ä»¥ä¸Šï¼˜æ™‚é–“æœªæº€\n37\n\n\n20æ­³-29æ­³\nç”·æ€§\nï¼˜æ™‚é–“ä»¥ä¸Šï¼™æ™‚é–“æœªæº€\n19\n\n\n20æ­³-29æ­³\nç”·æ€§\nï¼™æ™‚é–“ä»¥ä¸Š\n3\n\n\n20æ­³-29æ­³\nå¥³æ€§\nï¼•æ™‚é–“æœªæº€\n28\n\n\n20æ­³-29æ­³\nå¥³æ€§\nï¼•æ™‚é–“ä»¥ä¸Šï¼–æ™‚é–“æœªæº€\n106\n\n\n20æ­³-29æ­³\nå¥³æ€§\nï¼–æ™‚é–“ä»¥ä¸Šï¼—æ™‚é–“æœªæº€\n94\n\n\n20æ­³-29æ­³\nå¥³æ€§\nï¼—æ™‚é–“ä»¥ä¸Šï¼˜æ™‚é–“æœªæº€\n55\n\n\n\n\n\n\n\nãŠã¾ã‘ï¼šå–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ã‚°ãƒ©ãƒ•åŒ–\næœ€å¾Œã«ï¼Œå–å¾—ã—ãŸ2015å¹´ã®ç”·å¥³ãƒ»å¹´é½¢éšç´šåˆ¥ã®ç¡çœ æ™‚é–“ãƒ‡ãƒ¼ã‚¿ã‚’ã‚°ãƒ©ãƒ•åŒ–ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ã‚°ãƒ©ãƒ•ã‚ˆã‚Šï¼Œç”·æ€§ã¨å¥³æ€§ã§ã¯å¹´é½¢éšç´šåˆ¥ã®ç¡çœ æ™‚é–“ã®å‚¾å‘ãŒç•°ãªã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼\n\ndata_sleeptime_2015 |&gt; \n  mutate(ageclass_name = as_factor(ageclass_name),\n         sex_name = as_factor(sex_name),\n         sleeptime_name = as_factor(sleeptime_name)) |&gt; \n  group_by(ageclass_name, sex_name) |&gt; \n  mutate(prop = person / sum(person)) |&gt; \n  ungroup() |&gt; \n  ggplot(aes(ageclass_name, prop,\n             fill = fct_rev(sleeptime_name))) +\n  geom_col() +\n  geom_text(aes(label = if_else(prop &gt; 0.05,\n                                scales::label_percent(accuracy = 1)(prop),\n                                \"\")),\n            position = position_stack(vjust = 0.5)) +\n  scale_x_discrete(\"å¹´é½¢éšç´š\") +\n  scale_y_continuous(\"å‰²åˆ\", \n                     labels = scales::label_percent(accuracy = 1)) +\n  scale_fill_brewer(\"ç¡çœ æ™‚é–“\",\n                    palette = \"Spectral\") +\n  facet_wrap(~ sex_name) +\n  guides(x = guide_axis(n.dodge = 2))"
  },
  {
    "objectID": "posts/2022/12/call-e-stat-api-in-r.html#ã¾ã¨ã‚",
    "href": "posts/2022/12/call-e-stat-api-in-r.html#ã¾ã¨ã‚",
    "title": "Rã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã‚ˆã†ï¼ˆe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ï¼‰",
    "section": "ã¾ã¨ã‚",
    "text": "ã¾ã¨ã‚\næœ¬è¨˜äº‹ã§ã¯ï¼Œe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸï¼\nRã§çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ï¼Œä½œæ¥­ã®å†ç¾æ€§ã‚„åŠ¹ç‡æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼ã¾ãŸï¼Œjpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã“ã¨ã§ï¼Œãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ãƒ‡ãƒ¼ã‚¿æ•´å½¢ã‚’åŒæ™‚ã«è¡Œã†ã“ã¨ãŒã§ãã‚‹ãŸã‚ä¾¿åˆ©ã§ã™ï¼ã¿ãªã•ã‚“ã‚‚ãœã²ä½¿ã£ã¦ã¿ã¦ãã ã•ã„ï¼"
  },
  {
    "objectID": "posts/2022/12/call-e-stat-api-in-r.html#footnotes",
    "href": "posts/2022/12/call-e-stat-api-in-r.html#footnotes",
    "title": "Rã§æ—¥æœ¬ã®çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å–å¾—ã—ã‚ˆã†ï¼ˆe-Stat APIã¨jpstatãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ï¼‰",
    "section": "è„šæ³¨",
    "text": "è„šæ³¨\n\n\ne-Stat APIã§ã¯ï¼Œãƒ¡ã‚¿æƒ…å ±å–å¾—ãƒ»çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—ä»¥å¤–ã«ã‚‚ï¼Œæ§˜ã€…ãªæ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ï¼ˆAPIä»•æ§˜ï¼‰ï¼â†©ï¸\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³IDã®å–å¾—ã«ã¯ï¼ŒURLã‚’ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼å…¬é–‹ã‚µã‚¤ãƒˆã§åˆ©ç”¨ã—ãªã„å ´åˆã«ã¯ï¼Œhttp://test.localhost/ãªã©ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ï¼ˆè©³ã—ãã¯åˆ©ç”¨ã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§ï¼‰ï¼â†©ï¸\ne-Statã®ãƒšãƒ¼ã‚¸ã®å³ä¸Šã®ã€ŒAPIã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨APIã®ã‚¯ã‚¨ãƒªãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼ã‚¯ã‚¨ãƒªå†…ã®statsDataId ã‚’ç›´æ¥å…¥åŠ›ã™ã‚‹ã“ã¨ã§ãƒ¡ã‚¿æƒ…å ±ã‚’å–å¾—ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼â†©ï¸\nãŸã ã—ï¼Œå„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®é …ç›®æ•°ã«ã¯ï¼Œ100ä»¶ã¨ã„ã†ä¸Šé™ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ï¼Œãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œã®é …ç›®æ•°ãŒå¤šããªã‚‹å ´åˆã«ã¯ï¼Œãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã‚ãšï¼Œå…¨ã¦ã®é …ç›®ã‚’é¸æŠã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ï¼â†©ï¸\nselect() é–¢æ•°ã§ã‚ã‚‹é …ç›®ã®åˆ—ã‚’å…¨ã¦å‰Šé™¤ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼ã“ã‚Œã¯ï¼Œã€Œç·æ•°ã€ã®ã¿ã‚’é¸æŠã™ã‚‹å ´åˆãªã©ï¼Œåˆ†æã«ä¸è¦ãªé …ç›®ã‚’å‰Šé™¤ã™ã‚‹å ´åˆã«ä¾¿åˆ©ã§ã™ï¼â†©ï¸"
  },
  {
    "objectID": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html",
    "href": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html",
    "title": "åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã®ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã‚’ã¤ãã‚Šã¾ã—ãŸï¼ˆR Shiny&jpgridï¼‰",
    "section": "",
    "text": "R Shinyã‚’ä½¿ã£ã¦åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã‚’ã¤ãã£ã¦ã¿ã¾ã—ãŸï¼\nåœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ã¨ã¯ï¼ŒçµŒåº¦ãƒ»ç·¯åº¦ã«ã‚‚ã¨ã¥ã„ã¦ï¼ˆæ—¥æœ¬ã®ï¼‰åœ°åŸŸã‚’ã»ã¼æ­£æ–¹å½¢ã®ãƒ¡ãƒƒã‚·ãƒ¥ã«åˆ†å‰²ã—ãŸã‚‚ã®ã§ï¼Œçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆåŒºåˆ†ã¨ã—ã¦ã‚ˆãåˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ï¼\nä»Šå›ã¤ãã£ãŸã‚¢ãƒ—ãƒªã¯ï¼ŒRãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®jpgridãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ©Ÿèƒ½ã®ä¸€éƒ¨ã‚’æä¾›ã—ã¦ã„ã¾ã™ï¼ ã“ã®ã‚¢ãƒ—ãƒªã®æä¾›æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼\n\nå¸‚åŒºç”ºæ‘åˆ¥ã®åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\nãƒ¡ãƒƒã‚·ãƒ¥æ–‡å­—åˆ—ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\nçµŒåº¦ãƒ»ç·¯åº¦ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\n\n\n\n\nã‚¢ãƒ—ãƒªã®å¤–è¦³ï¼ˆã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¢ãƒ—ãƒªãŒé–‹ãã¾ã™ï¼‰"
  },
  {
    "objectID": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html#ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦",
    "href": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html#ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦",
    "title": "åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã®ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã‚’ã¤ãã‚Šã¾ã—ãŸï¼ˆR Shiny&jpgridï¼‰",
    "section": "",
    "text": "R Shinyã‚’ä½¿ã£ã¦åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã‚’ã¤ãã£ã¦ã¿ã¾ã—ãŸï¼\nåœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ã¨ã¯ï¼ŒçµŒåº¦ãƒ»ç·¯åº¦ã«ã‚‚ã¨ã¥ã„ã¦ï¼ˆæ—¥æœ¬ã®ï¼‰åœ°åŸŸã‚’ã»ã¼æ­£æ–¹å½¢ã®ãƒ¡ãƒƒã‚·ãƒ¥ã«åˆ†å‰²ã—ãŸã‚‚ã®ã§ï¼Œçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆåŒºåˆ†ã¨ã—ã¦ã‚ˆãåˆ©ç”¨ã•ã‚Œã¦ã„ã¾ã™ï¼\nä»Šå›ã¤ãã£ãŸã‚¢ãƒ—ãƒªã¯ï¼ŒRãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®jpgridãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ©Ÿèƒ½ã®ä¸€éƒ¨ã‚’æä¾›ã—ã¦ã„ã¾ã™ï¼ ã“ã®ã‚¢ãƒ—ãƒªã®æä¾›æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼\n\nå¸‚åŒºç”ºæ‘åˆ¥ã®åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\nãƒ¡ãƒƒã‚·ãƒ¥æ–‡å­—åˆ—ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\nçµŒåº¦ãƒ»ç·¯åº¦ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\n\n\n\n\nã‚¢ãƒ—ãƒªã®å¤–è¦³ï¼ˆã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¢ãƒ—ãƒªãŒé–‹ãã¾ã™ï¼‰"
  },
  {
    "objectID": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html#ã‚¢ãƒ—ãƒªã®æä¾›æ©Ÿèƒ½ã«ã¤ã„ã¦",
    "href": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html#ã‚¢ãƒ—ãƒªã®æä¾›æ©Ÿèƒ½ã«ã¤ã„ã¦",
    "title": "åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã®ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã‚’ã¤ãã‚Šã¾ã—ãŸï¼ˆR Shiny&jpgridï¼‰",
    "section": "ã‚¢ãƒ—ãƒªã®æä¾›æ©Ÿèƒ½ã«ã¤ã„ã¦",
    "text": "ã‚¢ãƒ—ãƒªã®æä¾›æ©Ÿèƒ½ã«ã¤ã„ã¦\n\nå¸‚åŒºç”ºæ‘åˆ¥ã®åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\nç·å‹™çœçµ±è¨ˆå±€ã®å…¬é–‹ã™ã‚‹å¸‚åŒºç”ºæ‘åˆ¥ãƒ¡ãƒƒã‚·ãƒ¥ãƒ»ã‚³ãƒ¼ãƒ‰ä¸€è¦§ã‹ã‚‰å¸‚åŒºç”ºæ‘åˆ¥ã®ãƒ¡ãƒƒã‚·ãƒ¥ã‚’å–å¾—ã—ã¾ã™ï¼\nä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹é †ã§å¸‚åŒºç”ºæ‘åˆ¥ã®ãƒ¡ãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆãƒ»ä¿å­˜ã§ãã¾ã™ï¼\n\néƒ½é“åºœçœŒã‚’é¸æŠï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰\nå¸‚åŒºç”ºæ‘ã‚’é¸æŠï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰\nãƒ¡ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºï¼ˆ1 kmï¼10 kmï¼80 kmã®ã„ãšã‚Œã‹ï¼‰ã‚’é¸æŠã—ã€Œãƒ¡ãƒƒã‚·ãƒ¥è¡¨ç¤ºã€ã‚’æŠ¼ã™\nãƒ‡ãƒ¼ã‚¿å½¢å¼ï¼ˆGeoPackageã¾ãŸã¯CSVï¼‰ã‚’é¸æŠã—ã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ã‚’æŠ¼ã™\n\n\n\n\nå¸‚åŒºç”ºæ‘åˆ¥ãƒ¡ãƒƒã‚·ãƒ¥ã®è¡¨ç¤ºã‚¤ãƒ¡ãƒ¼ã‚¸\n\n\njpgridãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ï¼Œgrid_city ãƒ‡ãƒ¼ã‚¿ã§å¸‚åŒºç”ºæ‘åˆ¥ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ï¼\nä»¥ä¸‹ã®ã‚ˆã†ã«ï¼Œå¸‚åŒºç”ºæ‘åˆ¥ãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã‚’å›³ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\nlibrary(jpgrid)\nlibrary(tidyverse)\n\nJGD2011 &lt;- 6668\n\ngrid_city |&gt; \n  filter(city_name_ja %in% c(\"åƒè‘‰å¸‚ä¸­å¤®åŒº\", \"åƒè‘‰å¸‚èŠ±è¦‹å·åŒº\", \"åƒè‘‰å¸‚ç¨²æ¯›åŒº\")) |&gt; \n  grid_as_sf(crs = 6668) |&gt; \n  ggplot(aes(fill = city_name_ja)) +\n  geom_sf() +\n  scale_fill_brewer(palette = \"Set2\")\n\n\n\n\n\n\nãƒ¡ãƒƒã‚·ãƒ¥æ–‡å­—åˆ—ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\nä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹é †ã§ãƒ¡ãƒƒã‚·ãƒ¥æ–‡å­—åˆ—ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆãƒ»ä¿å­˜ã§ãã¾ã™ï¼\n\nãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠï¼ˆCSVã¾ãŸã¯Excelï¼‰\nãƒ¡ãƒƒã‚·ãƒ¥æ–‡å­—åˆ—ã®åˆ—åã‚’æŒ‡å®šï¼ˆåœ°ç‚¹IDã‚‚æŒ‡å®šå¯èƒ½ï¼‰ã—ã€Œãƒ¡ãƒƒã‚·ãƒ¥è¡¨ç¤ºã€ã‚’æŠ¼ã™\nãƒ‡ãƒ¼ã‚¿å½¢å¼ï¼ˆGeoPackageã¾ãŸã¯CSVï¼‰ã‚’é¸æŠã—ã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ã‚’æŠ¼ã™\n\njpgridãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ï¼Œparse_grid() ã§æ–‡å­—åˆ—ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\n\n\nçµŒåº¦ãƒ»ç·¯åº¦ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\nåŒæ§˜ã«ï¼Œä»¥ä¸‹ã®æ‰‹é †ã§çµŒåº¦ãƒ»ç·¯åº¦ã‚’å«ã‚€è¡¨ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆãƒ»ä¿å­˜ã§ãã¾ã™ï¼\n\nãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠï¼ˆCSVã¾ãŸã¯Excelï¼‰\nçµŒåº¦ï¼ˆXï¼‰ãƒ»ç·¯åº¦ï¼ˆYï¼‰ã®åˆ—åã‚’æŒ‡å®šï¼ˆåœ°ç‚¹IDã‚‚æŒ‡å®šå¯èƒ½ï¼‰ã—ã€Œãƒ¡ãƒƒã‚·ãƒ¥è¡¨ç¤ºã€ã‚’æŠ¼ã™\nãƒ‡ãƒ¼ã‚¿å½¢å¼ï¼ˆGeoPackageã¾ãŸã¯CSVï¼‰ã‚’é¸æŠã—ã€Œãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ã‚’æŠ¼ã™\n\njpgridãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ï¼Œcoords_to_grid() ã§æ–‡å­—åˆ—ã‹ã‚‰åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼"
  },
  {
    "objectID": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html#ãŠã‚ã‚Šã«",
    "href": "posts/2023/02/web-app-for-grid-square-codes-in-japan.html#ãŠã‚ã‚Šã«",
    "title": "åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã®ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã‚’ã¤ãã‚Šã¾ã—ãŸï¼ˆR Shiny&jpgridï¼‰",
    "section": "ãŠã‚ã‚Šã«",
    "text": "ãŠã‚ã‚Šã«\nR Shinyã§ä½œæˆã—ãŸåœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã®ãŸã‚ã®WEBã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸï¼\nWEBã‚¢ãƒ—ãƒªã®ä½œæˆã«åˆ©ç”¨ã—ãŸjpgridãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ï¼Œã“ã®ã‚¢ãƒ—ãƒªã§æä¾›ã—ã¦ã„ãªã„æ§˜ã€…ãªæ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ï¼è©³ã—ãã¯ï¼Œã“ã¡ã‚‰ã‚’ã”è¦§ãã ã•ã„ï¼\nä¾‹ã¨ã—ã¦ï¼Œã‚¸ã‚ªãƒ¡ãƒˆãƒªã‚’ãƒ¡ãƒƒã‚·ãƒ¥ã«å¤‰æ›ã™ã‚‹geometry_to_grid() ãªã©ãŒã‚ã‚Šã¾ã™ï¼\nãœã²åœ°åŸŸãƒ¡ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ã®åˆ†æã«jpgridãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚æ´»ç”¨ã—ã¦ã¿ã¦ãã ã•ã„ï¼\n\njapan &lt;- rnaturalearth::ne_countries(country = \"japan\",\n                                     scale = \"medium\",\n                                     returnclass = \"sf\")\ngrid_japan &lt;- japan |&gt; \n  geometry_to_grid(\"80km\") |&gt; \n  dplyr::first() |&gt; \n  grid_as_sf(crs = sf::st_crs(japan))\n\njapan |&gt; \n  ggplot() +\n  geom_sf() +\n  geom_sf(data = grid_japan,\n          fill = \"transparent\")"
  },
  {
    "objectID": "posts/2023/04/why-is-bayes-theorem-important.html",
    "href": "posts/2023/04/why-is-bayes-theorem-important.html",
    "title": "ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹ãƒ¼PCRæ¤œæŸ»ã‚’ä¾‹ã«ãƒ¼",
    "section": "",
    "text": "ã“ã®è¨˜äº‹ã§ã¯ï¼Œã‚³ãƒ­ãƒŠç¦ã§æ™®åŠã—ãŸPCRæ¤œæŸ»ã‚’ä¾‹ã«ï¼Œçµ±è¨ˆå­¦ã«ãŠã„ã¦æœ€ã‚‚æœ‰åãªå®šç†ã®ä¸€ã¤ã§ã‚ã‚‹ãƒ™ã‚¤ã‚ºã®å®šç†ã®é‡è¦æ€§ã«ã¤ã„ã¦èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ï¼\nãƒ™ã‚¤ã‚ºã®å®šç†ã¯ï¼Œ å¼Â 1 ã®ã‚ˆã†ã«è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ï¼\n\\[\nP(A|B) \\propto P(B|A) P(A)\n\\tag{1}\\]\nå¼Â 1 ã¯ï¼Œä»¥ä¸‹ã®ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ï¼\n\nã‚ã‚‹çµæœ\\(B\\)ãŒç”Ÿã˜ãŸå ´åˆã«ï¼Œãã‚ŒãŒåŸå› \\(A\\)ã«ã‚ˆã‚‹ã‚‚ã®ã§ã‚ã‚‹ç¢ºç‡\\(P(A|B)\\)ã¯\nã‚ã‚‹åŸå› \\(A\\)ã®ç”Ÿã˜ã‚‹ç¢ºç‡\\(P(A)\\)ã¨ã‚ã‚‹åŸå› \\(A\\)ã®ã‚‚ã¨ã§çµæœ\\(B\\)ãŒç”Ÿã˜ã‚‹ç¢ºç‡\\(P(B|A)\\)ã®æ›ã‘ç®—ã«æ¯”ä¾‹ï¼ˆ\\(\\propto\\)ï¼‰ã™ã‚‹\n\nã‚‚ã£ã¨èº«è¿‘ãªã‚‚ã®ã§ä¾‹ãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼ ãŸã¨ãˆã°ï¼Œ\n\nåŸå› \\(A\\)ï¼šæ–°å‹ã‚³ãƒ­ãƒŠã¸ã®æ„ŸæŸ“ã®æœ‰ç„¡\nçµæœ\\(B\\)ï¼šPCRæ¤œæŸ»ãªã©ã§ã®è¨ºæ–­çµæœ\n\nã¨è€ƒãˆã‚Œã°ï¼Œ å¼Â 1 ã‚’ å¼Â 2 ã®ã‚ˆã†ã«ç½®ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\\[\nP(æ„ŸæŸ“ã®æœ‰ç„¡|è¨ºæ–­çµæœ) \\propto P(è¨ºæ–­çµæœ|æ„ŸæŸ“ã®æœ‰ç„¡) P(æ„ŸæŸ“ã®æœ‰ç„¡)\n\\tag{2}\\]"
  },
  {
    "objectID": "posts/2023/04/why-is-bayes-theorem-important.html#ãƒ™ã‚¤ã‚ºã®å®šç†ã¨ã¯",
    "href": "posts/2023/04/why-is-bayes-theorem-important.html#ãƒ™ã‚¤ã‚ºã®å®šç†ã¨ã¯",
    "title": "ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹ãƒ¼PCRæ¤œæŸ»ã‚’ä¾‹ã«ãƒ¼",
    "section": "",
    "text": "ã“ã®è¨˜äº‹ã§ã¯ï¼Œã‚³ãƒ­ãƒŠç¦ã§æ™®åŠã—ãŸPCRæ¤œæŸ»ã‚’ä¾‹ã«ï¼Œçµ±è¨ˆå­¦ã«ãŠã„ã¦æœ€ã‚‚æœ‰åãªå®šç†ã®ä¸€ã¤ã§ã‚ã‚‹ãƒ™ã‚¤ã‚ºã®å®šç†ã®é‡è¦æ€§ã«ã¤ã„ã¦èª¬æ˜ã—ãŸã„ã¨æ€ã„ã¾ã™ï¼\nãƒ™ã‚¤ã‚ºã®å®šç†ã¯ï¼Œ å¼Â 1 ã®ã‚ˆã†ã«è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ï¼\n\\[\nP(A|B) \\propto P(B|A) P(A)\n\\tag{1}\\]\nå¼Â 1 ã¯ï¼Œä»¥ä¸‹ã®ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ï¼\n\nã‚ã‚‹çµæœ\\(B\\)ãŒç”Ÿã˜ãŸå ´åˆã«ï¼Œãã‚ŒãŒåŸå› \\(A\\)ã«ã‚ˆã‚‹ã‚‚ã®ã§ã‚ã‚‹ç¢ºç‡\\(P(A|B)\\)ã¯\nã‚ã‚‹åŸå› \\(A\\)ã®ç”Ÿã˜ã‚‹ç¢ºç‡\\(P(A)\\)ã¨ã‚ã‚‹åŸå› \\(A\\)ã®ã‚‚ã¨ã§çµæœ\\(B\\)ãŒç”Ÿã˜ã‚‹ç¢ºç‡\\(P(B|A)\\)ã®æ›ã‘ç®—ã«æ¯”ä¾‹ï¼ˆ\\(\\propto\\)ï¼‰ã™ã‚‹\n\nã‚‚ã£ã¨èº«è¿‘ãªã‚‚ã®ã§ä¾‹ãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼ ãŸã¨ãˆã°ï¼Œ\n\nåŸå› \\(A\\)ï¼šæ–°å‹ã‚³ãƒ­ãƒŠã¸ã®æ„ŸæŸ“ã®æœ‰ç„¡\nçµæœ\\(B\\)ï¼šPCRæ¤œæŸ»ãªã©ã§ã®è¨ºæ–­çµæœ\n\nã¨è€ƒãˆã‚Œã°ï¼Œ å¼Â 1 ã‚’ å¼Â 2 ã®ã‚ˆã†ã«ç½®ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼\n\\[\nP(æ„ŸæŸ“ã®æœ‰ç„¡|è¨ºæ–­çµæœ) \\propto P(è¨ºæ–­çµæœ|æ„ŸæŸ“ã®æœ‰ç„¡) P(æ„ŸæŸ“ã®æœ‰ç„¡)\n\\tag{2}\\]"
  },
  {
    "objectID": "posts/2023/04/why-is-bayes-theorem-important.html#ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹",
    "href": "posts/2023/04/why-is-bayes-theorem-important.html#ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹",
    "title": "ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹ãƒ¼PCRæ¤œæŸ»ã‚’ä¾‹ã«ãƒ¼",
    "section": "ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹ï¼Ÿ",
    "text": "ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹ï¼Ÿ\nå¼Â 2 ã«åŸºã¥ãï¼Œãƒ™ã‚¤ã‚ºã®å®šç†ã®é‡è¦æ€§ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼ å®Ÿã¯ï¼Œ å¼Â 2 ã«ç¤ºã—ãŸãƒ™ã‚¤ã‚ºã®å®šç†ã«å‡ºã¦ãã‚‹3ã¤ã®ç¢ºç‡ã¯ï¼Œã©ã‚Œã‚‚éå¸¸ã«é‡è¦ãªæŒ‡æ¨™ã¨å¯¾å¿œã—ã¦ã„ã¾ã™ï¼ˆä¸‹è¡¨å‚ç…§ï¼‰ï¼ ã¤ã¾ã‚Šï¼Œ å¼Â 2 ã‹ã‚‰ã¯ï¼Œæ¤œæŸ»ã®ç²¾åº¦ï¼ˆæ„Ÿåº¦ãƒ»ç‰¹ç•°åº¦ï¼‰ãŒé«˜ãã¦ã‚‚ï¼Œæ¤œæŸ»å‰ç¢ºç‡ãŒä½ã‘ã‚Œã°é™½æ€§çš„ä¸­ç‡ãŒä½ããªã‚‹ã“ã¨ãªã©ãŒã‚ã‹ã‚Šã¾ã™ï¼\n\n\n\n\n\n\n\nç¢ºç‡\nåŒ»ç™‚åˆ†é‡ã§å¯¾å¿œã™ã‚‹æŒ‡æ¨™\n\n\n\n\n\\(P(è¨ºæ–­çµæœ|æ„ŸæŸ“ã®æœ‰ç„¡)\\)\næ¤œæŸ»å¾Œç¢ºç‡ï¼šçµ±è¨ˆå­¦ã§ã¯äº‹å¾Œç¢ºç‡ã¨å‘¼ã°ã‚Œã‚‹\n\né™½æ€§çš„ä¸­ç‡ï¼šé™½æ€§ã¨è¨ºæ–­ã•ã‚ŒãŸã¨ãå®Ÿéš›ã«æ„ŸæŸ“\né™°æ€§çš„ä¸­ç‡ï¼šé™°æ€§ã¨è¨ºæ–­ã•ã‚ŒãŸã¨ãå®Ÿéš›ã«æœªæ„ŸæŸ“\n\n\n\n\\(P(è¨ºæ–­çµæœ|æ„ŸæŸ“ã®æœ‰ç„¡)\\)\n\næ„Ÿåº¦ï¼šæ„ŸæŸ“è€…ãŒé™½æ€§ã¨è¨ºæ–­ã•ã‚Œã‚‹ç¢ºç‡â†”ï¸å½é™°æ€§ã«é–¢é€£\nç‰¹ç•°åº¦ï¼šæœªæ„ŸæŸ“è€…ãŒé™°æ€§ã¨è¨ºæ–­ã•ã‚Œã‚‹ç¢ºç‡â†”ï¸å½é™½æ€§ã«é–¢é€£\n\n\n\n\\(P(æ„ŸæŸ“ã®æœ‰ç„¡)\\)\næ¤œæŸ»å‰ç¢ºç‡ï¼šçµ±è¨ˆå­¦ã§ã¯äº‹å‰ç¢ºç‡ã¨å‘¼ã°ã‚Œã‚‹\n\næ¤œæŸ»å¯¾è±¡è€…ã®ãªã‹ã§ã®æ„ŸæŸ“è€…ã®å‰²åˆ\n\n\n\n\nãŸã¨ãˆã°ï¼Œä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ³ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼\n\næ„Ÿåº¦ãƒ»ç‰¹ç•°åº¦ã¯ã¨ã‚‚ã«99 %ï¼ˆå½é™°æ€§ãƒ»å½é™½æ€§ãŒã„ãšã‚Œã‚‚1 %ã®ç¢ºç‡ã§ç”Ÿã˜ã‚‹ï¼‰\næ¤œæŸ»å‰ç¢ºç‡ã¯1 %ï¼ˆæ„ŸæŸ“è€…ã¯100 äººä¸­1 äººã§æ®‹ã‚Šã®99 äººã¯æœªæ„ŸæŸ“è€…ï¼‰\n\nã“ã®å ´åˆï¼Œé™½æ€§ã¨è¨ºæ–­ã•ã‚ŒãŸå ´åˆã«æ„ŸæŸ“è€…ã§ã‚ã‚‹ç¢ºç‡\\(P(æ„ŸæŸ“|é™½æ€§)\\)ã¨ï¼Œé™½æ€§ã¨è¨ºæ–­ã•ã‚ŒãŸå ´åˆã«æœªæ„ŸæŸ“è€…ã§ã‚ã‚‹ç¢ºç‡\\(P(æœªæ„ŸæŸ“|é™½æ€§)\\)ã¯ï¼Œ ãã‚Œãã‚Œ å¼Â 3 ã¨ãªã‚Šã¾ã™ï¼\n\\[\n\\begin{align}\n  P(æ„ŸæŸ“|é™½æ€§) \\propto P(é™½æ€§|æ„ŸæŸ“)P(æ„ŸæŸ“) &= 0.99 \\times 0.01 = 0.0099 \\\\\n  P(æœªæ„ŸæŸ“|é™½æ€§) \\propto P(é™½æ€§|æœªæ„ŸæŸ“)P(æœªæ„ŸæŸ“) &= (1 - 0.99) \\times (1 - 0.01) = 0.0099\n\\end{align}\n\\tag{3}\\]\nå¼Â 3 ã‚ˆã‚Šï¼Œ\\(P(æ„ŸæŸ“|é™½æ€§)\\)ã¨\\(P(æœªæ„ŸæŸ“|é™½æ€§)\\)ã¯ç­‰ã—ã„ã“ã¨ãŒã‚ã‹ã‚Šï¼Œ é™½æ€§çš„ä¸­ç‡ã¯50 %ã¨ãªã‚Šã¾ã™ï¼ ã¤ã¾ã‚Šï¼Œé™½æ€§ã¨è¨ºæ–­ã•ã‚ŒãŸæ¤œæŸ»å¯¾è±¡è€…ã®ãªã‹ã§ï¼Œå®Ÿéš›ã«ï¼Œæ„ŸæŸ“è€…ã§ã‚ã‚‹äººã¯2äººã«1äººã—ã‹ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ï¼\nã“ã®ã‚ˆã†ã«ï¼Œãƒ™ã‚¤ã‚ºã®å®šç†ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ ã€Œæ¤œæŸ»ã®ç²¾åº¦ï¼ˆæ„Ÿåº¦ãƒ»ç‰¹ç•°åº¦ï¼‰ãŒé«˜ãã¦ã‚‚æ¤œæŸ»å‰ç¢ºç‡ãŒä½ã‘ã‚Œã°é™½æ€§çš„ä¸­ç‡ãŒä½ããªã£ã¦ã—ã¾ã†ã€ã¨ã„ã£ãŸ é‡è¦ãªé–¢ä¿‚æ€§ãŒæ˜ã‚‰ã‹ã¨ãªã‚Šã¾ã™ï¼"
  },
  {
    "objectID": "posts/2023/04/why-is-bayes-theorem-important.html#ã¾ã¨ã‚",
    "href": "posts/2023/04/why-is-bayes-theorem-important.html#ã¾ã¨ã‚",
    "title": "ãªãœãƒ™ã‚¤ã‚ºã®å®šç†ãŒé‡è¦ãªã®ã‹ãƒ¼PCRæ¤œæŸ»ã‚’ä¾‹ã«ãƒ¼",
    "section": "ã¾ã¨ã‚",
    "text": "ã¾ã¨ã‚\nã‚³ãƒ­ãƒŠç¦ã§æ™®åŠã—ãŸPCRæ¤œæŸ»ã‚’ä¾‹ã«ï¼Œãƒ™ã‚¤ã‚ºã®å®šç†ã®é‡è¦æ€§ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸï¼\nç¾å®Ÿã«å³ã—ãŸè¨ˆç®—äº‹ä¾‹ã«èˆˆå‘³ãŒã‚ã‚‹å ´åˆã¯ï¼Œ çµ±è¨ˆå±€ã®å…¬é–‹ã—ã¦ã„ã‚‹ã‚³ãƒ©ãƒ ã‚‚ã”ä¸€èª­ã•ã‚Œã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ï¼"
  }
]